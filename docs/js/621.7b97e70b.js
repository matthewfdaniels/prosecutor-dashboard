"use strict";(self["webpackChunkprosecutor_dashboard"]=self["webpackChunkprosecutor_dashboard"]||[]).push([[621],{9621:function(e,t,n){n.r(t),n.d(t,{default:function(){return Oc}});var o=n(3396);const i={class:"background"};function a(e,t,n,a,r,s){const l=(0,o.up)("Flowchart");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(l)])}const r={class:"flowchart"},s=(0,o.uE)('<section class="box pre"><h3>Social Context</h3><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p></section><div class="flowchart-bg"></div><section class="box intro"><h2>Prosecution Process</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p></section><section class="box more"><h2>Trial Begins</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p></section><section class="box conclusion"><h3>Outcomes</h3><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p></section>',5),l={key:0,class:"scrim"};function u(e,t,n,i,a,u){const c=(0,o.up)("CustomNode"),d=(0,o.up)("VueFlow"),h=(0,o.up)("NodeTakeover");return(0,o.wg)(),(0,o.iD)("div",r,[s,(0,o.Wm)(d,{modelValue:a.elements,"onUpdate:modelValue":t[0]||(t[0]=e=>a.elements=e),class:"basicflow customnodeflow","default-zoom":1,"min-zoom":1,"max-zoom":1,"nodes-draggable":!1,nodeTypes:a.nodeTypes,onPaneReady:e.onLoad,"connection-mode":e.connectionMode,"connection-line-style":e.connectionLineStyle,"fit-view-on-init":!0},{"node-custom":(0,o.w5)((e=>[(0,o.Wm)(c,{data:e.data},null,8,["data"])])),_:1},8,["modelValue","nodeTypes","onPaneReady","connection-mode","connection-line-style"]),a.showTakeover?((0,o.wg)(),(0,o.iD)("div",l)):(0,o.kq)("",!0),a.showTakeover?((0,o.wg)(),(0,o.j4)(h,{key:1,class:"takeover",model:a.currentNode,onClose:u.closeTakeover},null,8,["model","onClose"])):(0,o.kq)("",!0)])}n(7658);var c,d=n(4870),h=n(7139),f=Object.defineProperty,p=Object.defineProperties,v=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&w(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&w(e,n,t[n]);return e},x=(e,t)=>p(e,v(t)),k=(e,t)=>{var n={};for(var o in e)m.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&g)for(var o of g(e))t.indexOf(o)<0&&y.call(e,o)&&(n[o]=e[o]);return n};function _(e,t){let n,i,a;const r=(0,d.iH)(!0);return(0,o.YP)(e,(()=>{r.value=!0,a()}),{flush:"sync"}),(0,d.ZM)(((e,o)=>(i=e,a=o,{get(){return r.value&&(n=t(),r.value=!1),i(),n},set(){}})))}function S(){const e=[],t=t=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)},n=n=>(e.push(n),{off:()=>t(n)}),o=t=>{e.forEach((e=>e(t)))};return{on:n,off:t,trigger:o}}function C(e){return!!(0,d.nZ)()&&((0,d.EB)(e),!0)}const N="undefined"!==typeof window,M=e=>"undefined"!==typeof e,T=e=>"function"===typeof e,P=e=>"string"===typeof e,E=()=>{};function V(e,t){function n(...n){e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})}return n}N&&(null==(c=null==window?void 0:window.navigator)?void 0:c.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const $=e=>e();function B(e=$){const t=(0,d.iH)(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...n)=>{t.value&&e(...n)};return{isActive:t,pause:n,resume:o,eventFilter:i}}function I(e,t=!1,n="Timeout"){return new Promise(((o,i)=>{t?setTimeout((()=>i(n)),e):setTimeout(o,e)}))}function H(e,t=!0){(0,o.FN)()?(0,o.bv)(e):t?e():(0,o.Y3)(e)}function z(e){let t=!1;function n(n,{flush:i="sync",deep:a=!1,timeout:r,throwOnTimeout:s}={}){let l=null;const u=new Promise((r=>{l=(0,o.YP)(e,(e=>{n(e)!==t&&(null==l||l(),r(e))}),{flush:i,deep:a,immediate:!0})})),c=[u];return null!=r&&c.push(I(r,s).then((()=>(0,d.SU)(e))).finally((()=>null==l?void 0:l()))),Promise.race(c)}function i(i,a){if(!(0,d.dq)(i))return n((e=>e===i),a);const{flush:r="sync",deep:s=!1,timeout:l,throwOnTimeout:u}=null!=a?a:{};let c=null;const h=new Promise((n=>{c=(0,o.YP)([e,i],(([e,o])=>{t!==(e===o)&&(null==c||c(),n(e))}),{flush:r,deep:s,immediate:!0})})),f=[h];return null!=l&&f.push(I(l,u).then((()=>(0,d.SU)(e))).finally((()=>(null==c||c(),(0,d.SU)(e))))),Promise.race(f)}function a(e){return n((e=>Boolean(e)),e)}function r(e){return i(null,e)}function s(e){return i(void 0,e)}function l(e){return n(Number.isNaN,e)}function u(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes((0,d.SU)(e))}),t)}function c(e){return h(1,e)}function h(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}if(Array.isArray((0,d.SU)(e))){const e={toMatch:n,toContains:u,changed:c,changedTimes:h,get not(){return t=!t,this}};return e}{const e={toMatch:n,toBe:i,toBeTruthy:a,toBeNull:r,toBeNaN:l,toBeUndefined:s,changed:c,changedTimes:h,get not(){return t=!t,this}};return e}}var O=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,Y=(e,t)=>{var n={};for(var o in e)D.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&O)for(var o of O(e))t.indexOf(o)<0&&A.call(e,o)&&(n[o]=e[o]);return n};function j(e,t,n={}){const i=n,{eventFilter:a=$}=i,r=Y(i,["eventFilter"]);return(0,o.YP)(e,V(a,t),r)}var R=Object.defineProperty,L=Object.defineProperties,X=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,W=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z=(e,t)=>{for(var n in t||(t={}))q.call(t,n)&&W(e,n,t[n]);if(U)for(var n of U(t))F.call(t,n)&&W(e,n,t[n]);return e},G=(e,t)=>L(e,X(t)),K=(e,t)=>{var n={};for(var o in e)q.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&U)for(var o of U(e))t.indexOf(o)<0&&F.call(e,o)&&(n[o]=e[o]);return n};function J(e,t,n={}){const o=n,{eventFilter:i}=o,a=K(o,["eventFilter"]),{eventFilter:r,pause:s,resume:l,isActive:u}=B(i),c=j(e,t,G(Z({},a),{eventFilter:r}));return{stop:c,pause:s,resume:l,isActive:u}}function Q(e){var t;const n=(0,d.SU)(e);return null!=(t=null==n?void 0:n.$el)?t:n}const ee=N?window:void 0;function te(...e){let t,n,i,a;if(P(e[0])?([n,i,a]=e,t=ee):[t,n,i,a]=e,!t)return E;let r=E;const s=(0,o.YP)((()=>Q(t)),(e=>{r(),e&&(e.addEventListener(n,i,a),r=()=>{e.removeEventListener(n,i,a),r=E})}),{immediate:!0,flush:"post"}),l=()=>{s(),r()};return C(l),l}var ne=Object.defineProperty,oe=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,le=(e,t,n)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ue=(e,t)=>{for(var n in t||(t={}))re.call(t,n)&&le(e,n,t[n]);if(ae)for(var n of ae(t))se.call(t,n)&&le(e,n,t[n]);return e},ce=(e,t)=>oe(e,ie(t));const de=e=>"function"===typeof e?e:"string"===typeof e?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):e?()=>!0:()=>!1;function he(e,t,n={}){const{target:o=ee,eventName:i="keydown",passive:a=!1}=n,r=de(e),s=e=>{r(e)&&t(e)};return te(o,i,s,a)}function fe(e,t,n={}){return he(e,t,ce(ue({},n),{eventName:"keydown"}))}function pe(e,t,n={}){return he(e,t,ce(ue({},n),{eventName:"keypress"}))}function ve(e,t,n={}){return he(e,t,ce(ue({},n),{eventName:"keyup"}))}function ge(e,t=null){const n=(0,o.FN)();let i=()=>{};const a=(0,d.ZM)(((o,a)=>(i=a,{get(){var i,a;return o(),null!=(a=null==(i=null==n?void 0:n.proxy)?void 0:i.$refs[e])?a:t},set(){}})));return H(i),(0,o.ic)(i),a}const me="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ye="__vueuse_ssr_handlers__";me[ye]=me[ye]||{},me[ye];var we,be=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,_e=(e,t)=>{var n={};for(var o in e)xe.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&be)for(var o of be(e))t.indexOf(o)<0&&ke.call(e,o)&&(n[o]=e[o]);return n};function Se(e,t,n={}){const i=n,{window:a=ee}=i,r=_e(i,["window"]);let s;const l=a&&"ResizeObserver"in a,u=()=>{s&&(s.disconnect(),s=void 0)},c=(0,o.YP)((()=>Q(e)),(e=>{u(),l&&a&&e&&(s=new ResizeObserver(t),s.observe(e,r))}),{immediate:!0,flush:"post"}),d=()=>{u(),c()};return C(d),{isSupported:l,stop:d}}function Ce(e,t={}){const{reset:n=!0,windowResize:i=!0,windowScroll:a=!0,immediate:r=!0}=t,s=(0,d.iH)(0),l=(0,d.iH)(0),u=(0,d.iH)(0),c=(0,d.iH)(0),h=(0,d.iH)(0),f=(0,d.iH)(0),p=(0,d.iH)(0),v=(0,d.iH)(0);function g(){const t=Q(e);if(!t)return void(n&&(s.value=0,l.value=0,u.value=0,c.value=0,h.value=0,f.value=0,p.value=0,v.value=0));const o=t.getBoundingClientRect();s.value=o.height,l.value=o.bottom,u.value=o.left,c.value=o.right,h.value=o.top,f.value=o.width,p.value=o.x,v.value=o.y}return Se(e,g),(0,o.YP)((()=>Q(e)),(e=>!e&&g())),a&&te("scroll",g,{passive:!0}),i&&te("resize",g,{passive:!0}),H((()=>{r&&g()})),{height:s,bottom:l,left:u,right:c,top:h,width:f,x:p,y:v,update:g}}function Ne(e,t,n,i={}){var a;const{passive:r=!1,eventName:s,deep:l=!1,defaultValue:u}=i,c=(0,o.FN)(),h=n||(null==c?void 0:c.emit)||(null==(a=null==c?void 0:c.$emit)?void 0:a.bind(c));let f=s;t||(t="modelValue"),f=s||f||`update:${t.toString()}`;const p=()=>M(e[t])?e[t]:u;if(r){const n=(0,d.iH)(p());return(0,o.YP)((()=>e[t]),(e=>n.value=e)),(0,o.YP)(n,(n=>{(n!==e[t]||l)&&h(f,n)}),{deep:l}),n}return(0,o.Fl)({get(){return p()},set(e){h(f,e)}})}(function(e){e["UP"]="UP",e["RIGHT"]="RIGHT",e["DOWN"]="DOWN",e["LEFT"]="LEFT",e["NONE"]="NONE"})(we||(we={}));var Me={value:()=>{}};function Te(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new Pe(o)}function Pe(e){this._=e}function Ee(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Ve(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function $e(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Me,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}Pe.prototype=Te.prototype={constructor:Pe,on:function(e,t){var n,o=this._,i=Ee(e+"",o),a=-1,r=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);while(++a<r)if(n=(e=i[a]).type)o[n]=$e(o[n],e.name,t);else if(null==t)for(n in o)o[n]=$e(o[n],e.name,null);return this}while(++a<r)if((n=(e=i[a]).type)&&(n=Ve(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pe(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],a=0,n=o.length;a<n;++a)o[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};var Be="http://www.w3.org/1999/xhtml",Ie={svg:"http://www.w3.org/2000/svg",xhtml:Be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function He(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ie.hasOwnProperty(t)?{space:Ie[t],local:e}:e}function ze(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Be&&t.documentElement.namespaceURI===Be?t.createElement(e):t.createElementNS(n,e)}}function Oe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function De(e){var t=He(e);return(t.local?Oe:ze)(t)}function Ae(){}function Ye(e){return null==e?Ae:function(){return this.querySelector(e)}}function je(e){"function"!==typeof e&&(e=Ye(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,r,s=t[i],l=s.length,u=o[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(r=e.call(a,a.__data__,c,s))&&("__data__"in a&&(r.__data__=a.__data__),u[c]=r);return new En(o,this._parents)}function Re(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Le(){return[]}function Xe(e){return null==e?Le:function(){return this.querySelectorAll(e)}}function Ue(e){return function(){return Re(e.apply(this,arguments))}}function qe(e){e="function"===typeof e?Ue(e):Xe(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r,s=t[a],l=s.length,u=0;u<l;++u)(r=s[u])&&(o.push(e.call(r,r.__data__,u,s)),i.push(r));return new En(o,i)}function Fe(e){return function(){return this.matches(e)}}function We(e){return function(t){return t.matches(e)}}var Ze=Array.prototype.find;function Ge(e){return function(){return Ze.call(this.children,e)}}function Ke(){return this.firstElementChild}function Je(e){return this.select(null==e?Ke:Ge("function"===typeof e?e:We(e)))}var Qe=Array.prototype.filter;function et(){return Array.from(this.children)}function tt(e){return function(){return Qe.call(this.children,e)}}function nt(e){return this.selectAll(null==e?et:tt("function"===typeof e?e:We(e)))}function ot(e){"function"!==typeof e&&(e=Fe(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,r=t[i],s=r.length,l=o[i]=[],u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new En(o,this._parents)}function it(e){return new Array(e.length)}function at(){return new En(this._enter||this._groups.map(it),this._parents)}function rt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function st(e){return function(){return e}}function lt(e,t,n,o,i,a){for(var r,s=0,l=t.length,u=a.length;s<u;++s)(r=t[s])?(r.__data__=a[s],o[s]=r):n[s]=new rt(e,a[s]);for(;s<l;++s)(r=t[s])&&(i[s]=r)}function ut(e,t,n,o,i,a,r){var s,l,u,c=new Map,d=t.length,h=a.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u=r.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<h;++s)u=r.call(e,a[s],s,a)+"",(l=c.get(u))?(o[s]=l,l.__data__=a[s],c.delete(u)):n[s]=new rt(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function ct(e){return e.__data__}function dt(e,t){if(!arguments.length)return Array.from(this,ct);var n=t?ut:lt,o=this._parents,i=this._groups;"function"!==typeof e&&(e=st(e));for(var a=i.length,r=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=o[u],d=i[u],h=d.length,f=ht(e.call(c,c&&c.__data__,u,o)),p=f.length,v=s[u]=new Array(p),g=r[u]=new Array(p),m=l[u]=new Array(h);n(c,d,v,g,m,f,t);for(var y,w,b=0,x=0;b<p;++b)if(y=v[b]){b>=x&&(x=b+1);while(!(w=g[x])&&++x<p);y._next=w||null}}return r=new En(r,o),r._enter=s,r._exit=l,r}function ht(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function ft(){return new En(this._exit||this._groups.map(it),this._parents)}function pt(e,t,n){var o=this.enter(),i=this,a=this.exit();return"function"===typeof e?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),null!=t&&(i=t(i),i&&(i=i.selection())),null==n?a.remove():n(a),o&&i?o.merge(i).order():i}function vt(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),s=new Array(i),l=0;l<r;++l)for(var u,c=n[l],d=o[l],h=c.length,f=s[l]=new Array(h),p=0;p<h;++p)(u=c[p]||d[p])&&(f[p]=u);for(;l<i;++l)s[l]=n[l];return new En(s,this._parents)}function gt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],a=i.length-1,r=i[a];--a>=0;)(o=i[a])&&(r&&4^o.compareDocumentPosition(r)&&r.parentNode.insertBefore(o,r),r=o);return this}function mt(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=yt);for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r,s=n[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(r=s[c])&&(u[c]=r);u.sort(t)}return new En(i,this._parents).order()}function yt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bt(){return Array.from(this)}function xt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function kt(){let e=0;for(const t of this)++e;return e}function _t(){return!this.node()}function St(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,a=t[n],r=0,s=a.length;r<s;++r)(i=a[r])&&e.call(i,i.__data__,r,a);return this}function Ct(e){return function(){this.removeAttribute(e)}}function Nt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mt(e,t){return function(){this.setAttribute(e,t)}}function Tt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pt(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Et(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vt(e,t){var n=He(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Nt:Ct:"function"===typeof t?n.local?Et:Pt:n.local?Tt:Mt)(n,t))}function $t(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bt(e){return function(){this.style.removeProperty(e)}}function It(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ht(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function zt(e,t,n){return arguments.length>1?this.each((null==t?Bt:"function"===typeof t?Ht:It)(e,t,null==n?"":n)):Ot(this.node(),e)}function Ot(e,t){return e.style.getPropertyValue(t)||$t(e).getComputedStyle(e,null).getPropertyValue(t)}function Dt(e){return function(){delete this[e]}}function At(e,t){return function(){this[e]=t}}function Yt(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function jt(e,t){return arguments.length>1?this.each((null==t?Dt:"function"===typeof t?Yt:At)(e,t)):this.node()[e]}function Rt(e){return e.trim().split(/^|\s+/)}function Lt(e){return e.classList||new Xt(e)}function Xt(e){this._node=e,this._names=Rt(e.getAttribute("class")||"")}function Ut(e,t){var n=Lt(e),o=-1,i=t.length;while(++o<i)n.add(t[o])}function qt(e,t){var n=Lt(e),o=-1,i=t.length;while(++o<i)n.remove(t[o])}function Ft(e){return function(){Ut(this,e)}}function Wt(e){return function(){qt(this,e)}}function Zt(e,t){return function(){(t.apply(this,arguments)?Ut:qt)(this,e)}}function Gt(e,t){var n=Rt(e+"");if(arguments.length<2){var o=Lt(this.node()),i=-1,a=n.length;while(++i<a)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?Zt:t?Ft:Wt)(n,t))}function Kt(){this.textContent=""}function Jt(e){return function(){this.textContent=e}}function Qt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function en(e){return arguments.length?this.each(null==e?Kt:("function"===typeof e?Qt:Jt)(e)):this.node().textContent}function tn(){this.innerHTML=""}function nn(e){return function(){this.innerHTML=e}}function on(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function an(e){return arguments.length?this.each(null==e?tn:("function"===typeof e?on:nn)(e)):this.node().innerHTML}function rn(){this.nextSibling&&this.parentNode.appendChild(this)}function sn(){return this.each(rn)}function ln(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function un(){return this.each(ln)}function cn(e){var t="function"===typeof e?e:De(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function dn(){return null}function hn(e,t){var n="function"===typeof e?e:De(e),o=null==t?dn:"function"===typeof t?t:Ye(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function fn(){var e=this.parentNode;e&&e.removeChild(this)}function pn(){return this.each(fn)}function vn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mn(e){return this.select(e?gn:vn)}function yn(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wn(e){return function(t){e.call(this,t,this.__data__)}}function bn(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function xn(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,a=t.length;o<a;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function kn(e,t,n){return function(){var o,i=this.__on,a=wn(t);if(i)for(var r=0,s=i.length;r<s;++r)if((o=i[r]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),void(o.value=t);this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(o):this.__on=[o]}}function _n(e,t,n){var o,i,a=bn(e+""),r=a.length;if(!(arguments.length<2)){for(s=t?kn:xn,o=0;o<r;++o)this.each(s(a[o],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(o=0,l=s[u];o<r;++o)if((i=a[o]).type===l.type&&i.name===l.name)return l.value}function Sn(e,t,n){var o=$t(e),i=o.CustomEvent;"function"===typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Cn(e,t){return function(){return Sn(this,e,t)}}function Nn(e,t){return function(){return Sn(this,e,t.apply(this,arguments))}}function Mn(e,t){return this.each(("function"===typeof t?Nn:Cn)(e,t))}function*Tn(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],a=0,r=i.length;a<r;++a)(o=i[a])&&(yield o)}rt.prototype={constructor:rt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Xt.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Pn=[null];function En(e,t){this._groups=e,this._parents=t}function Vn(){return new En([[document.documentElement]],Pn)}function $n(){return this}function Bn(e){return"string"===typeof e?new En([[document.querySelector(e)]],[document.documentElement]):new En([[e]],Pn)}function In(e){let t;while(t=e.sourceEvent)e=t;return e}function Hn(e,t){if(e=In(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}En.prototype=Vn.prototype={constructor:En,select:je,selectAll:qe,selectChild:Je,selectChildren:nt,filter:ot,data:dt,enter:at,exit:ft,join:pt,merge:vt,selection:$n,order:gt,sort:mt,call:wt,nodes:bt,node:xt,size:kt,empty:_t,each:St,attr:Vt,style:zt,property:jt,classed:Gt,text:en,html:an,raise:sn,lower:un,append:cn,insert:hn,remove:pn,clone:mn,datum:yn,on:_n,dispatch:Mn,[Symbol.iterator]:Tn};const zn={passive:!1},On={capture:!0,passive:!1};function Dn(e){e.stopImmediatePropagation()}function An(e){e.preventDefault(),e.stopImmediatePropagation()}function Yn(e){var t=e.document.documentElement,n=Bn(e).on("dragstart.drag",An,On);"onselectstart"in t?n.on("selectstart.drag",An,On):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jn(e,t){var n=e.document.documentElement,o=Bn(e).on("dragstart.drag",null);t&&(o.on("click.drag",An,On),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Rn=e=>()=>e;function Ln(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:r,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function Xn(e){return!e.ctrlKey&&!e.button}function Un(){return this.parentNode}function qn(e,t){return null==t?{x:e.x,y:e.y}:t}function Fn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wn(){var e,t,n,o,i=Xn,a=Un,r=qn,s=Fn,l={},u=Te("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",m,zn).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(r,s){if(!o&&i.call(this,r,s)){var l=w(this,a.call(this,r,s),r,s,"mouse");l&&(Bn(r.view).on("mousemove.drag",p,On).on("mouseup.drag",v,On),Yn(r.view),Dn(r),n=!1,e=r.clientX,t=r.clientY,l("start",r))}}function p(o){if(An(o),!n){var i=o.clientX-e,a=o.clientY-t;n=i*i+a*a>d}l.mouse("drag",o)}function v(e){Bn(e.view).on("mousemove.drag mouseup.drag",null),jn(e.view,n),An(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,o,r=e.changedTouches,s=a.call(this,e,t),l=r.length;for(n=0;n<l;++n)(o=w(this,s,e,t,r[n].identifier,r[n]))&&(Dn(e),o("start",e,r[n]))}}function m(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=l[o[t].identifier])&&(An(e),n("drag",e,o[t]))}function y(e){var t,n,i=e.changedTouches,a=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<a;++t)(n=l[i[t].identifier])&&(Dn(e),n("end",e,i[t]))}function w(e,t,n,o,i,a){var s,d,f,p=u.copy(),v=Hn(a||n,t);if(null!=(f=r.call(e,new Ln("beforestart",{sourceEvent:n,target:h,identifier:i,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),o)))return s=f.x-v[0]||0,d=f.y-v[1]||0,function n(a,r,u){var g,m=v;switch(a){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":v=Hn(u||r,t),g=c;break}p.call(a,e,new Ln(a,{sourceEvent:r,subject:f,target:h,identifier:i,active:g,x:v[0]+s,y:v[1]+d,dx:v[0]-m[0],dy:v[1]-m[1],dispatch:p}),o)}}return h.filter=function(e){return arguments.length?(i="function"===typeof e?e:Rn(!!e),h):i},h.container=function(e){return arguments.length?(a="function"===typeof e?e:Rn(e),h):a},h.subject=function(e){return arguments.length?(r="function"===typeof e?e:Rn(e),h):r},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Rn(!!e),h):s},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}function Zn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gn(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Kn(){}Ln.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Jn=.7,Qn=1/Jn,eo="\\s*([+-]?\\d+)\\s*",to="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",no="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oo=/^#([0-9a-f]{3,8})$/,io=new RegExp(`^rgb\\(${eo},${eo},${eo}\\)$`),ao=new RegExp(`^rgb\\(${no},${no},${no}\\)$`),ro=new RegExp(`^rgba\\(${eo},${eo},${eo},${to}\\)$`),so=new RegExp(`^rgba\\(${no},${no},${no},${to}\\)$`),lo=new RegExp(`^hsl\\(${to},${no},${no}\\)$`),uo=new RegExp(`^hsla\\(${to},${no},${no},${to}\\)$`),co={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ho(){return this.rgb().formatHex()}function fo(){return this.rgb().formatHex8()}function po(){return Po(this).formatHsl()}function vo(){return this.rgb().formatRgb()}function go(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?mo(t):3===n?new xo(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?yo(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?yo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=io.exec(e))?new xo(t[1],t[2],t[3],1):(t=ao.exec(e))?new xo(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ro.exec(e))?yo(t[1],t[2],t[3],t[4]):(t=so.exec(e))?yo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lo.exec(e))?To(t[1],t[2]/100,t[3]/100,1):(t=uo.exec(e))?To(t[1],t[2]/100,t[3]/100,t[4]):co.hasOwnProperty(e)?mo(co[e]):"transparent"===e?new xo(NaN,NaN,NaN,0):null}function mo(e){return new xo(e>>16&255,e>>8&255,255&e,1)}function yo(e,t,n,o){return o<=0&&(e=t=n=NaN),new xo(e,t,n,o)}function wo(e){return e instanceof Kn||(e=go(e)),e?(e=e.rgb(),new xo(e.r,e.g,e.b,e.opacity)):new xo}function bo(e,t,n,o){return 1===arguments.length?wo(e):new xo(e,t,n,null==o?1:o)}function xo(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function ko(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function _o(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo(255*(isNaN(this.opacity)?1:this.opacity))}`}function So(){const e=Co(this.opacity);return`${1===e?"rgb(":"rgba("}${No(this.r)}, ${No(this.g)}, ${No(this.b)}${1===e?")":`, ${e})`}`}function Co(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function No(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mo(e){return e=No(e),(e<16?"0":"")+e.toString(16)}function To(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vo(e,t,n,o)}function Po(e){if(e instanceof Vo)return new Vo(e.h,e.s,e.l,e.opacity);if(e instanceof Kn||(e=go(e)),!e)return new Vo;if(e instanceof Vo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,s=a-i,l=(a+i)/2;return s?(r=t===a?(n-o)/s+6*(n<o):n===a?(o-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,r*=60):s=l>0&&l<1?0:r,new Vo(r,s,l,e.opacity)}function Eo(e,t,n,o){return 1===arguments.length?Po(e):new Vo(e,t,n,null==o?1:o)}function Vo(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function $o(e){return e=(e||0)%360,e<0?e+360:e}function Bo(e){return Math.max(0,Math.min(1,e||0))}function Io(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Zn(Kn,go,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ho,formatHex:ho,formatHex8:fo,formatHsl:po,formatRgb:vo,toString:vo}),Zn(xo,bo,Gn(Kn,{brighter(e){return e=null==e?Qn:Math.pow(Qn,e),new xo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Jn:Math.pow(Jn,e),new xo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xo(No(this.r),No(this.g),No(this.b),Co(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ko,formatHex:ko,formatHex8:_o,formatRgb:So,toString:So})),Zn(Vo,Eo,Gn(Kn,{brighter(e){return e=null==e?Qn:Math.pow(Qn,e),new Vo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Jn:Math.pow(Jn,e),new Vo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new xo(Io(e>=240?e-240:e+120,i,o),Io(e,i,o),Io(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Vo($o(this.h),Bo(this.s),Bo(this.l),Co(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Co(this.opacity);return`${1===e?"hsl(":"hsla("}${$o(this.h)}, ${100*Bo(this.s)}%, ${100*Bo(this.l)}%${1===e?")":`, ${e})`}`}}));var Ho=e=>()=>e;function zo(e,t){return function(n){return e+n*t}}function Oo(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Do(e){return 1===(e=+e)?Ao:function(t,n){return n-t?Oo(t,n,e):Ho(isNaN(t)?n:t)}}function Ao(e,t){var n=t-e;return n?zo(e,n):Ho(isNaN(e)?t:e)}var Yo=function e(t){var n=Do(t);function o(e,t){var o=n((e=bo(e)).r,(t=bo(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),r=Ao(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=a(t),e.opacity=r(t),e+""}}return o.gamma=e,o}(1);function jo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lo=new RegExp(Ro.source,"g");function Xo(e){return function(){return e}}function Uo(e){return function(t){return e(t)+""}}function qo(e,t){var n,o,i,a=Ro.lastIndex=Lo.lastIndex=0,r=-1,s=[],l=[];e+="",t+="";while((n=Ro.exec(e))&&(o=Lo.exec(t)))(i=o.index)>a&&(i=t.slice(a,i),s[r]?s[r]+=i:s[++r]=i),(n=n[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,l.push({i:r,x:jo(n,o)})),a=Lo.lastIndex;return a<t.length&&(i=t.slice(a),s[r]?s[r]+=i:s[++r]=i),s.length<2?l[0]?Uo(l[0].x):Xo(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}var Fo,Wo=180/Math.PI,Zo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Go(e,t,n,o,i,a){var r,s,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Wo,skewX:Math.atan(l)*Wo,scaleX:r,scaleY:s}}function Ko(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zo:Go(t.a,t.b,t.c,t.d,t.e,t.f)}function Jo(e){return null==e?Zo:(Fo||(Fo=document.createElementNS("http://www.w3.org/2000/svg","g")),Fo.setAttribute("transform",e),(e=Fo.transform.baseVal.consolidate())?(e=e.matrix,Go(e.a,e.b,e.c,e.d,e.e,e.f)):Zo)}function Qo(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}function a(e,o,i,a,r,s){if(e!==i||o!==a){var l=r.push("translate(",null,t,null,n);s.push({i:l-4,x:jo(e,i)},{i:l-2,x:jo(o,a)})}else(i||a)&&r.push("translate("+i+t+a+n)}function r(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,o)-2,x:jo(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}function s(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,o)-2,x:jo(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}function l(e,t,n,o,a,r){if(e!==n||t!==o){var s=a.push(i(a)+"scale(",null,",",null,")");r.push({i:s-4,x:jo(e,n)},{i:s-2,x:jo(t,o)})}else 1===n&&1===o||a.push(i(a)+"scale("+n+","+o+")")}return function(t,n){var o=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,o,i),r(t.rotate,n.rotate,o,i),s(t.skewX,n.skewX,o,i),l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,o,i),t=n=null,function(e){var t,n=-1,a=i.length;while(++n<a)o[(t=i[n]).i]=t.x(e);return o.join("")}}}var ei=Qo(Ko,"px, ","px)","deg)"),ti=Qo(Jo,", ",")",")"),ni=1e-12;function oi(e){return((e=Math.exp(e))+1/e)/2}function ii(e){return((e=Math.exp(e))-1/e)/2}function ai(e){return((e=Math.exp(2*e))-1)/(e+1)}var ri,si,li=function e(t,n,o){function i(e,i){var a,r,s=e[0],l=e[1],u=e[2],c=i[0],d=i[1],h=i[2],f=c-s,p=d-l,v=f*f+p*p;if(v<ni)r=Math.log(h/u)/t,a=function(e){return[s+e*f,l+e*p,u*Math.exp(t*e*r)]};else{var g=Math.sqrt(v),m=(h*h-u*u+o*v)/(2*u*n*g),y=(h*h-u*u-o*v)/(2*h*n*g),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);r=(b-w)/t,a=function(e){var o=e*r,i=oi(w),a=u/(n*g)*(i*ai(t*o+w)-ii(w));return[s+a*f,l+a*p,u*i/oi(t*o+w)]}}return a.duration=1e3*r*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n,i=o*o;return e(n,o,i)},i}(Math.SQRT2,2,4),ui=0,ci=0,di=0,hi=1e3,fi=0,pi=0,vi=0,gi="object"===typeof performance&&performance.now?performance:Date,mi="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yi(){return pi||(mi(wi),pi=gi.now()+vi)}function wi(){pi=0}function bi(){this._call=this._time=this._next=null}function xi(e,t,n){var o=new bi;return o.restart(e,t,n),o}function ki(){yi(),++ui;var e,t=ri;while(t)(e=pi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ui}function _i(){pi=(fi=gi.now())+vi,ui=ci=0;try{ki()}finally{ui=0,Ci(),pi=0}}function Si(){var e=gi.now(),t=e-fi;t>hi&&(vi-=t,fi=e)}function Ci(){var e,t,n=ri,o=1/0;while(n)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ri=t);si=e,Ni(o)}function Ni(e){if(!ui){ci&&(ci=clearTimeout(ci));var t=e-pi;t>24?(e<1/0&&(ci=setTimeout(_i,e-gi.now()-vi)),di&&(di=clearInterval(di))):(di||(fi=gi.now(),di=setInterval(Si,hi)),ui=1,mi(_i))}}function Mi(e,t,n){var o=new bi;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}bi.prototype=xi.prototype={constructor:bi,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?yi():+n)+(null==t?0:+t),this._next||si===this||(si?si._next=this:ri=this,si=this),this._call=e,this._time=n,Ni()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ni())}};var Ti=Te("start","end","cancel","interrupt"),Pi=[],Ei=0,Vi=1,$i=2,Bi=3,Ii=4,Hi=5,zi=6;function Oi(e,t,n,o,i,a){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};ji(e,n,{name:t,index:o,group:i,on:Ti,tween:Pi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ei})}function Di(e,t){var n=Yi(e,t);if(n.state>Ei)throw new Error("too late; already scheduled");return n}function Ai(e,t){var n=Yi(e,t);if(n.state>Bi)throw new Error("too late; already running");return n}function Yi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ji(e,t,n){var o,i=e.__transition;function a(e){n.state=Vi,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(a){var u,c,d,h;if(n.state!==Vi)return l();for(u in i)if(h=i[u],h.name===n.name){if(h.state===Bi)return Mi(r);h.state===Ii?(h.state=zi,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=zi,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[u])}if(Mi((function(){n.state===Bi&&(n.state=Ii,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=$i,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$i){for(n.state=Bi,o=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function s(t){var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=Hi,1),a=-1,r=o.length;while(++a<r)o[a].call(e,i);n.state===Hi&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=zi,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=xi(a,0,n.time)}function Ri(e,t){var n,o,i,a=e.__transition,r=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(o=n.state>$i&&n.state<Hi,n.state=zi,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):r=!1;r&&delete e.__transition}}function Li(e){return this.each((function(){Ri(this,e)}))}function Xi(e,t){var n,o;return function(){var i=Ai(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,s=o.length;r<s;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Ui(e,t,n){var o,i;if("function"!==typeof n)throw new Error;return function(){var a=Ai(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function qi(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=Yi(this.node(),n).tween,a=0,r=i.length;a<r;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((null==t?Xi:Ui)(n,e,t))}function Fi(e,t,n){var o=e._id;return e.each((function(){var e=Ai(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Yi(e,o).value[t]}}function Wi(e,t){var n;return("number"===typeof t?jo:t instanceof go?Yo:(n=go(t))?(t=n,Yo):qo)(e,t)}function Zi(e){return function(){this.removeAttribute(e)}}function Gi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ki(e,t,n){var o,i,a=n+"";return function(){var r=this.getAttribute(e);return r===a?null:r===o?i:i=t(o=r,n)}}function Ji(e,t,n){var o,i,a=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===a?null:r===o?i:i=t(o=r,n)}}function Qi(e,t,n){var o,i,a;return function(){var r,s,l=n(this);if(null!=l)return r=this.getAttribute(e),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l));this.removeAttribute(e)}}function ea(e,t,n){var o,i,a;return function(){var r,s,l=n(this);if(null!=l)return r=this.getAttributeNS(e.space,e.local),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l));this.removeAttributeNS(e.space,e.local)}}function ta(e,t){var n=He(e),o="transform"===n?ti:Wi;return this.attrTween(e,"function"===typeof t?(n.local?ea:Qi)(n,o,Fi(this,"attr."+e,t)):null==t?(n.local?Gi:Zi)(n):(n.local?Ji:Ki)(n,o,t))}function na(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oa(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ia(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&oa(e,i)),n}return i._value=t,i}function aa(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&na(e,i)),n}return i._value=t,i}function ra(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=He(e);return this.tween(n,(o.local?ia:aa)(o,t))}function sa(e,t){return function(){Di(this,e).delay=+t.apply(this,arguments)}}function la(e,t){return t=+t,function(){Di(this,e).delay=t}}function ua(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?sa:la)(t,e)):Yi(this.node(),t).delay}function ca(e,t){return function(){Ai(this,e).duration=+t.apply(this,arguments)}}function da(e,t){return t=+t,function(){Ai(this,e).duration=t}}function ha(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?ca:da)(t,e)):Yi(this.node(),t).duration}function fa(e,t){if("function"!==typeof t)throw new Error;return function(){Ai(this,e).ease=t}}function pa(e){var t=this._id;return arguments.length?this.each(fa(t,e)):Yi(this.node(),t).ease}function va(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Ai(this,e).ease=n}}function ga(e){if("function"!==typeof e)throw new Error;return this.each(va(this._id,e))}function ma(e){"function"!==typeof e&&(e=Fe(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a,r=t[i],s=r.length,l=o[i]=[],u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new qa(o,this._parents,this._name,this._id)}function ya(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),s=0;s<a;++s)for(var l,u=t[s],c=n[s],d=u.length,h=r[s]=new Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<o;++s)r[s]=t[s];return new qa(r,this._parents,this._name,this._id)}function wa(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function ba(e,t,n){var o,i,a=wa(t)?Di:Ai;return function(){var r=a(this,e),s=r.on;s!==o&&(i=(o=s).copy()).on(t,n),r.on=i}}function xa(e,t){var n=this._id;return arguments.length<2?Yi(this.node(),n).on.on(e):this.each(ba(n,e,t))}function ka(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _a(){return this.on("end.remove",ka(this._id))}function Sa(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Ye(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var s,l,u=o[r],c=u.length,d=a[r]=new Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,Oi(d[h],t,n,h,d,Yi(s,n)));return new qa(a,this._parents,t,n)}function Ca(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Xe(e));for(var o=this._groups,i=o.length,a=[],r=[],s=0;s<i;++s)for(var l,u=o[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,f=e.call(l,l.__data__,d,u),p=Yi(l,n),v=0,g=f.length;v<g;++v)(h=f[v])&&Oi(h,t,n,v,f,p);a.push(f),r.push(l)}return new qa(a,r,t,n)}var Na=Vn.prototype.constructor;function Ma(){return new Na(this._groups,this._parents)}function Ta(e,t){var n,o,i;return function(){var a=Ot(this,e),r=(this.style.removeProperty(e),Ot(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function Pa(e){return function(){this.style.removeProperty(e)}}function Ea(e,t,n){var o,i,a=n+"";return function(){var r=Ot(this,e);return r===a?null:r===o?i:i=t(o=r,n)}}function Va(e,t,n){var o,i,a;return function(){var r=Ot(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Ot(this,e)),r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s))}}function $a(e,t){var n,o,i,a,r="style."+t,s="end."+r;return function(){var l=Ai(this,e),u=l.on,c=null==l.value[r]?a||(a=Pa(t)):void 0;u===n&&i===c||(o=(n=u).copy()).on(s,i=c),l.on=o}}function Ba(e,t,n){var o="transform"===(e+="")?ei:Wi;return null==t?this.styleTween(e,Ta(e,o)).on("end.style."+e,Pa(e)):"function"===typeof t?this.styleTween(e,Va(e,o,Fi(this,"style."+e,t))).each($a(this._id,e)):this.styleTween(e,Ea(e,o,t),n).on("end.style."+e,null)}function Ia(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ha(e,t,n){var o,i;function a(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&Ia(e,a,n)),o}return a._value=t,a}function za(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,Ha(e,t,null==n?"":n))}function Oa(e){return function(){this.textContent=e}}function Da(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function Aa(e){return this.tween("text","function"===typeof e?Da(Fi(this,"text",e)):Oa(null==e?"":e+""))}function Ya(e){return function(t){this.textContent=e.call(this,t)}}function ja(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Ya(o)),t}return o._value=e,o}function Ra(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,ja(e))}function La(){for(var e=this._name,t=this._id,n=Fa(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r,s=o[a],l=s.length,u=0;u<l;++u)if(r=s[u]){var c=Yi(r,t);Oi(r,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qa(o,this._parents,e,n)}function Xa(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(a,r){var s={value:r},l={value:function(){0===--i&&a()}};n.each((function(){var n=Ai(this,o),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&a()}))}var Ua=0;function qa(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Fa(){return++Ua}var Wa=Vn.prototype;function Za(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}qa.prototype={constructor:qa,select:Sa,selectAll:Ca,selectChild:Wa.selectChild,selectChildren:Wa.selectChildren,filter:ma,merge:ya,selection:Ma,transition:La,call:Wa.call,nodes:Wa.nodes,node:Wa.node,size:Wa.size,empty:Wa.empty,each:Wa.each,on:xa,attr:ta,attrTween:ra,style:Ba,styleTween:za,text:Aa,textTween:Ra,remove:_a,tween:qi,delay:ua,duration:ha,ease:pa,easeVarying:ga,end:Xa,[Symbol.iterator]:Wa[Symbol.iterator]};var Ga={time:null,delay:0,duration:250,ease:Za};function Ka(e,t){var n;while(!(n=e.__transition)||!(n=n[t]))if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ja(e){var t,n;e instanceof qa?(t=e._id,e=e._name):(t=Fa(),(n=Ga).time=yi(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r,s=o[a],l=s.length,u=0;u<l;++u)(r=s[u])&&Oi(r,e,t,u,s,n||Ka(r,t));return new qa(o,this._parents,e,t)}Vn.prototype.interrupt=Li,Vn.prototype.transition=Ja;var Qa=e=>()=>e;function er(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function tr(e,t,n){this.k=e,this.x=t,this.y=n}tr.prototype={constructor:tr,scale:function(e){return 1===e?this:new tr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nr=new tr(1,0,0);function or(e){e.stopImmediatePropagation()}function ir(e){e.preventDefault(),e.stopImmediatePropagation()}function ar(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function rr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sr(){return this.__zoom||nr}function lr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ur(){return navigator.maxTouchPoints||"ontouchstart"in this}function cr(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function dr(){var e,t,n,o=ar,i=rr,a=cr,r=lr,s=ur,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=li,h=Te("start","zoom","end"),f=500,p=150,v=0,g=10;function m(e){e.property("__zoom",sr).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",N).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return t=Math.max(l[0],Math.min(l[1],t)),t===e.k?e:new tr(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new tr(e.k,o,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,o){e.on("start.zoom",(function(){k(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){k(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,a=arguments,r=k(e,a).event(o),s=i.apply(e,a),l=null==n?b(s):"function"===typeof n?n.apply(e,a):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"===typeof t?t.apply(e,a):t,f=d(c.invert(l).concat(u/c.k),h.invert(l).concat(u/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=u/t[2];e=new tr(n,l[0]-t[0]*n,l[1]-t[1]*n)}r.zoom(null,e)}}))}function k(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function S(e,...t){if(o.apply(this,arguments)){var n=k(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,r.apply(this,arguments)))),c=Hn(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],Ri(this),n.start()}ir(e),n.wheel=setTimeout(d,p),n.zoom("mouse",a(w(y(i,s),n.mouse[0],n.mouse[1]),n.extent,u))}function d(){n.wheel=null,n.end()}}function C(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,r=k(this,t,!0).event(e),s=Bn(e.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",f,!0),l=Hn(e,i),c=e.clientX,d=e.clientY;Yn(e.view),or(e),r.mouse=[l,this.__zoom.invert(l)],Ri(this),r.start()}function h(e){if(ir(e),!r.moved){var t=e.clientX-c,n=e.clientY-d;r.moved=t*t+n*n>v}r.event(e).zoom("mouse",a(w(r.that.__zoom,r.mouse[0]=Hn(e,i),r.mouse[1]),r.extent,u))}function f(e){s.on("mousemove.zoom mouseup.zoom",null),jn(e.view,r.moved),ir(e),r.event(e).end()}}function N(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,r=Hn(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(r),l=n.k*(e.shiftKey?.5:2),d=a(w(y(n,l),r,s),i.apply(this,t),u);ir(e),c>0?Bn(this).transition().duration(c).call(x,d,r,e):Bn(this).call(m.transform,d,r,e)}}function M(n,...i){if(o.apply(this,arguments)){var a,r,s,l,u=n.touches,c=u.length,d=k(this,i,n.changedTouches.length===c).event(n);for(or(n),r=0;r<c;++r)s=u[r],l=Hn(s,this),l=[l,this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),f)),Ri(this),d.start())}}function T(e,...t){if(this.__zooming){var n,o,i,r,s=k(this,t).event(e),l=e.changedTouches,c=l.length;for(ir(e),n=0;n<c;++n)o=l[n],i=Hn(o,this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=i);if(o=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],f=s.touch1[0],p=s.touch1[1],v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;o=y(o,Math.sqrt(v/g)),i=[(d[0]+f[0])/2,(d[1]+f[1])/2],r=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],r=s.touch0[1]}s.zoom("touch",a(w(o,i,r),s.extent,u))}}function P(e,...o){if(this.__zooming){var i,a,r=k(this,o).event(e),s=e.changedTouches,l=s.length;for(or(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),i=0;i<l;++i)a=s[i],r.touch0&&r.touch0[2]===a.identifier?delete r.touch0:r.touch1&&r.touch1[2]===a.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(a=Hn(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<g)){var u=Bn(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",sr),e!==i?x(e,t,n,o):i.interrupt().each((function(){k(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){var e=this.__zoom.k,n="function"===typeof t?t.apply(this,arguments):t;return e*n}),n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,r=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,s=o.invert(r),l="function"===typeof t?t.apply(this,arguments):t;return a(w(y(o,l),r,s),e,u)}),n,o)},m.translateBy=function(e,t,n,o){m.transform(e,(function(){return a(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)}),null,o)},m.translateTo=function(e,t,n,o,r){m.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,s=null==o?b(e):"function"===typeof o?o.apply(this,arguments):o;return a(nr.translate(s[0],s[1]).scale(r.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,u)}),o,r)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Bn(this.that).datum();h.call(e,this.that,new er(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(r="function"===typeof e?e:Qa(+e),m):r},m.filter=function(e){return arguments.length?(o="function"===typeof e?e:Qa(!!e),m):o},m.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Qa(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"===typeof e?e:Qa([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,m):Math.sqrt(v)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}tr.prototype;var hr=(e=>(e["Left"]="left",e["Top"]="top",e["Right"]="right",e["Bottom"]="bottom",e))(hr||{}),fr=(e=>(e["Bezier"]="default",e["Straight"]="straight",e["Step"]="step",e["SmoothStep"]="smoothstep",e))(fr||{}),pr=(e=>(e["Strict"]="strict",e["Loose"]="loose",e))(pr||{}),vr=(e=>(e["Arrow"]="arrow",e["ArrowClosed"]="arrowclosed",e))(vr||{}),gr=(e=>(e["Free"]="free",e["Vertical"]="vertical",e["Horizontal"]="horizontal",e))(gr||{});const mr=Symbol("vueFlow"),yr=Symbol("nodeId"),wr=Symbol("slots"),br=()=>({edgesChange:S(),nodesChange:S(),nodeDoubleClick:S(),nodeClick:S(),nodeMouseEnter:S(),nodeMouseMove:S(),nodeMouseLeave:S(),nodeContextMenu:S(),nodeDragStart:S(),nodeDrag:S(),nodeDragStop:S(),miniMapNodeClick:S(),miniMapNodeDoubleClick:S(),miniMapNodeMouseEnter:S(),miniMapNodeMouseMove:S(),miniMapNodeMouseLeave:S(),connect:S(),connectStart:S(),connectStop:S(),connectEnd:S(),paneReady:S(),move:S(),moveStart:S(),moveEnd:S(),selectionDragStart:S(),selectionDrag:S(),selectionDragStop:S(),selectionContextMenu:S(),paneScroll:S(),paneClick:S(),paneContextMenu:S(),edgeContextMenu:S(),edgeMouseEnter:S(),edgeMouseMove:S(),edgeMouseLeave:S(),edgeDoubleClick:S(),edgeClick:S(),edgeUpdateStart:S(),edgeUpdate:S(),edgeUpdateEnd:S(),updateNodeInternals:S()}),xr=(e,t)=>{for(const[n,o]of Object.entries(t)){const t=t=>{e(n,t)};o.on(t),C((()=>{o.off(t)}))}};var kr=(e,t)=>xr(e,t);const _r=["data-handleid","data-nodeid","data-handlepos"],Sr={name:"Handle"},Cr=(0,o.aZ)(x(b({},Sr),{props:{id:null,type:{default:"source"},position:{default:()=>"top"},isValidConnection:{type:Function,default:()=>function(){return!0}},connectable:{type:Boolean,default:!0}},setup(e){const t=xl(),n=(0,d.Vh)(t,"connectionStartHandle"),i=(0,d.Vh)(t,"connectionMode"),a=(0,o.f3)(yr,""),r=(0,o.Fl)((()=>{var t;return null!=(t=e.id)?t:i.value===pr.Strict?null:`${a}__handle-${e.position}`})),{onMouseDown:s,onClick:l}=Sl(),u=t=>{s(t,r.value,a,"target"===e.type,e.isValidConnection,void 0)},c=t=>{var n;l(t,null!=(n=r.value)?n:null,a,e.type,e.isValidConnection)},f=(0,o.Fl)((()=>["vue-flow__handle",`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.value}`,"nodrag",{source:"target"!==e.type,target:"target"===e.type,connectable:e.connectable,connecting:n.value&&n.value.nodeId===a&&n.value.handleId===r.value&&n.value.type===e.type}]));return(t,n)=>((0,o.wg)(),(0,o.iD)("div",{"data-handleid":r.value,"data-nodeid":(0,d.SU)(a),"data-handlepos":e.position,class:(0,h.C_)((0,d.SU)(f)),onMousedown:u,onClick:c},[(0,o.WI)(t.$slots,"default",{id:e.id})],42,_r))}})),Nr=function({sourcePosition:e=hr.Bottom,targetPosition:t=hr.Top,label:n,connectable:i=!1,isValidTargetPos:a,isValidSourcePos:r}){return[(0,o.h)(Cr,{type:"target",position:t,isConnectable:i,isValidConnection:a}),"string"!==typeof n&&n?(0,o.h)(n):(0,o.h)("div",{innerHTML:n}),(0,o.h)(Cr,{type:"source",position:e,isConnectable:i,isValidConnection:r})]};Nr.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],Nr.inheritAttrs=!1;const Mr=function({sourcePosition:e=hr.Bottom,label:t,connectable:n=!1,isValidSourcePos:i}){return["string"!==typeof t&&t?(0,o.h)(t):(0,o.h)("div",{innerHTML:t}),(0,o.h)(Cr,{type:"source",position:e,isConnectable:n,isValidConnection:i})]};Mr.props=["sourcePosition","label","isValidSourcePos","connectable"],Mr.inheritAttrs=!1;const Tr=function({targetPosition:e=hr.Top,label:t,connectable:n=!1,isValidTargetPos:i}){return[(0,o.h)(Cr,{type:"target",position:e,isConnectable:n,isValidConnection:i}),"string"!==typeof t&&t?(0,o.h)(t):(0,o.h)("div",{innerHTML:t})]};Tr.props=["targetPosition","label","isValidTargetPos","connectable"],Tr.inheritAttrs=!1;const Pr=e=>"nodeName"in e,Er=e=>{const t=e.target;return!(!t||!Pr(t))&&(["INPUT","SELECT","TEXTAREA","BUTTON"].includes(t.nodeName)||t.hasAttribute("contentEditable"))},Vr=e=>({width:e.offsetWidth,height:e.offsetHeight}),$r=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Br=(e,t)=>({x:$r(e.x,t[0][0],t[1][0]),y:$r(e.y,t[0][1],t[1][1])}),Ir=e=>{const t=e.getRootNode(),n=Cl();return"getElementFromPoint"in t?t:n.document},Hr=e=>"id"in e&&"source"in e&&"target"in e,zr=e=>Hr(e)&&"sourceNode"in e&&"targetNode"in e,Or=e=>"id"in e&&!Hr(e),Dr=e=>Or(e)&&"computedPosition"in e,Ar=(e,t,n)=>{var o;let i=n;return Dr(e)||(i=b({type:null!=(o=e.type)?o:"default",dimensions:(0,d.Xl)({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:(0,d.Xl)(b({z:0},e.position)),draggable:void 0,selectable:void 0,connectable:void 0},n)),x(b(b({},i),e),{id:e.id.toString()})},Yr=(e,t)=>(t=zr(e)?t:b({sourceHandle:e.sourceHandle?e.sourceHandle.toString():void 0,targetHandle:e.targetHandle?e.targetHandle.toString():void 0,type:e.type,source:e.source.toString(),target:e.target.toString(),z:0,sourceX:0,sourceY:0,targetX:0,targetY:0,updatable:e.updatable,selectable:e.selectable,data:e.data},t),Object.assign({id:e.id.toString()},e,t)),jr=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${null!=t?t:""}-${n}${null!=o?o:""}`,Rr=(e,t)=>t.some((t=>Hr(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))),Lr=({x:e,y:t},{x:n,y:o,zoom:i},a,[r,s])=>{const l={x:(e-n)/i,y:(t-o)/i};return a?{x:r*Math.round(l.x/r),y:s*Math.round(l.y/s)}:l},Xr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ur=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),qr=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Fr=(e,t)=>qr(Xr(Ur(e),Ur(t))),Wr=e=>{const t=e.reduce(((e,{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0}}={})=>Xr(e,Ur(b(b({},t),n)))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qr(t)},Zr=(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1)=>{const r=Ur({x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter((e=>{if(!e||!1===e.selectable)return!1;const{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0}}=e,o=Ur(b(b({},t),n)),i=Math.max(0,Math.min(r.x2,o.x2)-Math.max(r.x,o.x)),s=Math.max(0,Math.min(r.y2,o.y2)-Math.max(r.y,o.y)),l=Math.ceil(i*s),u="undefined"===typeof n.width||"undefined"===typeof n.height||0===n.width||0===n.height,c=a&&l>0,d=n.width*n.height;return u||c||l>=d}))},Gr=(e,t)=>{const n=e.map((e=>e.id));return t.filter((e=>n.includes(e.source)||n.includes(e.target)))},Kr=(e,t,n,o,i,a=.1,r={x:0,y:0})=>{var s,l;const u=t/(e.width*(1+a)),c=n/(e.height*(1+a)),d=Math.min(u,c),h=$r(d,o,i),f=e.x+e.width/2,p=e.y+e.height/2,v=t/2-f*h+(null!=(s=r.x)?s:0),g=n/2-p*h+(null!=(l=r.y)?l:0);return{x:v,y:g,zoom:h}},Jr=(e,t)=>({x:t.x+e.x,y:t.y+e.y,z:e.z>t.z?e.z:t.z}),Qr=(e,t)=>{if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||Qr(n,t))},es=e=>"undefined"===typeof e?"":"string"===typeof e?e:Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&"),ts=(e,t,n)=>{var o,i,a,r;const s=(null!=(o=null==n?void 0:n.x)?o:0)+t.x,l=(null!=(i=null==n?void 0:n.y)?i:0)+t.y,u=null!=(a=null==n?void 0:n.width)?a:t.width,c=null!=(r=null==n?void 0:n.height)?r:t.height;switch(e){case hr.Top:return{x:s+u/2,y:l};case hr.Right:return{x:s+u,y:l+c/2};case hr.Bottom:return{x:s+u/2,y:l+c};case hr.Left:return{x:s,y:l+c/2}}},ns=(e=[],t)=>{if(!e.length)return;let n;return t||1!==e.length?t&&(n=e.find((e=>e.id===t))):n=e[0],n||e[0]},os=(e,t,n,o,i,a)=>{const r=ts(n,b(b({},e.dimensions),e.computedPosition),t),s=ts(a,b(b({},o.dimensions),o.computedPosition),i);return{sourceX:r.x,sourceY:r.y,targetX:s.x,targetY:s.y}};function is({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:r,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ur({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:r/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y)),f=Math.ceil(d*h);return f>0}const as=(e,t)=>{let n=-1;const o=e.reduce(((e,o)=>{const i=t(o.source),a=t(o.target);if(!i||!a)return e;const r=o.z?o.z:Math.max(i.computedPosition.z||0,a.computedPosition.z||0);return e[r]?e[r].push(o):e[r]=[o],n=r>n?r:n,e}),{});return Object.entries(Object.keys(o).length?o:{0:[]}).map((([e,t])=>{const o=+e;return{edges:t,level:o,isMaxLevel:o===n}}))},rs=(e,t,n,o)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const a=Array.from(i);return a.map((e=>{var t;const i=e.getBoundingClientRect(),a=Vr(e),r=null!=(t=e.getAttribute("data-handleid"))?t:void 0,s=e.getAttribute("data-handlepos");return b({id:r,position:s,x:(i.left-n.left)/o,y:(i.top-n.top)/o},a)}))},ss=(e,t,n)=>{var o,i;const a=e.getBoundingClientRect();return{source:null!=(o=rs(".source"+(n?`.vue-flow__handle-${n}`:""),e,a,t))?o:void 0,target:null!=(i=rs(".target"+(n?`.vue-flow__handle-${n}`:""),e,a,t))?i:void 0}},ls=(e,t,n,o,i)=>{i.value=!1,e.selected?e.selected&&t&&o({nodes:[e]}):n([e])};function us(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){if(t.style=b({},t.style),n>0)if(t.style.width||(t.style.width=t.dimensions.width),"string"===typeof t.style.width){const e=parseInt(t.style.width,10);t.style.width=`${e+n}px`}else t.style.width+=n;if(o>0)if(t.style.height||(t.style.height=t.dimensions.height),"string"===typeof t.style.height){const e=parseInt(t.style.height,10);t.style.height=`${e+o}px`}else t.style.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"===typeof t.style.width){const e=parseInt(t.style.width,10);t.style.width=`${e+n}px`}else t.style.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"===typeof t.style.height){const e=parseInt(t.style.height,10);t.style.height=`${e+n}px`}else t.style.height+=n;e.position.y=0}}}}const cs=(e,t)=>{let n=t.map((e=>e.id));return e.forEach((e=>{if("add"===e.type){const n=e.item;return t.push(n)}const o=n.indexOf(e.id),i=t[o];switch(e.type){case"select":(Dr(i)||zr(i))&&(i.selected=e.selected);break;case"position":if(Dr(i)&&("undefined"!==typeof e.position&&(i.position=e.position),"undefined"!==typeof e.computedPosition&&(i.computedPosition=b(b({},i.computedPosition),e.computedPosition)),i.expandParent&&i.parentNode)){const e=t[n.indexOf(i.parentNode)];e&&Dr(e)&&us(i,e)}break;case"dimensions":if(Dr(i)&&("undefined"!==typeof e.dimensions&&(i.dimensions=e.dimensions),i.expandParent&&i.parentNode)){const e=t[n.indexOf(i.parentNode)];e&&Dr(e)&&us(i,e)}break;case"remove":n.includes(e.id)&&(t.splice(o,1),n=t.map((e=>e.id)));break}})),t},ds=(e,t)=>({id:e,type:"select",selected:t}),hs=e=>({item:e,type:"add"}),fs=e=>({id:e,type:"remove"}),ps=(e,t)=>e.reduce(((e,n)=>{const o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(ds(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(ds(n.id,!1))),e}),[]),vs=e=>"undefined"!==typeof e,gs=(e,t)=>{if(!e.source||!e.target)return console.warn("[vueflow]: Can't create edge. An edge needs a source and a target."),!1;let n;return n=Hr(e)?b({},e):x(b({},e),{id:jr(e)}),n=Yr(n),!Rr(n,t)&&n},ms=(e,t,n,o)=>{if(!t.source||!t.target)return console.warn("[vueflow]: Can't create new edge. An edge needs a source and a target."),!1;const i=n.find((t=>zr(t)&&t.id===e.id));if(!i)return console.warn(`[vueflow]: The old edge with id=${e.id} does not exist.`),!1;n.splice(n.indexOf(e),1);const a=x(b({},e),{id:jr(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return o([a]),a},ys=(e,t,n,o)=>{const i={},a=e.map((e=>{const n=(0,d.Um)(Ar(e,o,x(b({},t(e.id)),{parentNode:e.parentNode})));return e.parentNode&&(i[e.parentNode]=!0),n}));return a.forEach((e=>{const o=[...a,...n];if(e.parentNode&&!o.find((t=>t.id===e.parentNode))&&console.warn(`[vueflow]: Parent node ${e.parentNode} not found`),e.parentNode||i[e.id]){i[e.id]&&(e.isParent=!0);const n=e.parentNode?t(e.parentNode):void 0;n&&(n.isParent=!0)}})),a},ws=["data-id"],bs={name:"Node",inheritAttrs:!1},xs=(0,o.aZ)(x(b({},bs),{props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:{type:Boolean},snapGrid:null,type:{type:[null,Function,Object,Boolean]},name:null},setup(e){(0,o.p1)(e,["id","type","name","draggable","selectable","connectable","snapGrid"]),(0,o.JJ)(yr,e.id);const t=xl(),n=(0,d.Vh)(t,"edges"),i=(0,d.Vh)(t,"viewport"),a=(0,d.Vh)(t,"noPanClassName"),r=(0,d.Vh)(t,"selectNodesOnDrag"),s=(0,d.Vh)(t,"nodesSelectionActive"),l=(0,d.Vh)(t,"multiSelectionActive"),u=(0,d.Vh)(t,"emits"),c=(0,d.Vh)(t,"getNode"),f=(0,d.Vh)(t,"removeSelectedElements"),p=(0,d.Vh)(t,"addSelectedNodes"),v=(0,d.Vh)(t,"updateNodeDimensions"),g=(0,d.Vh)(t,"onUpdateNodeInternals"),m=(0,o.Fl)((()=>c.value(e.id))),y=(0,o.Fl)((()=>m.value.parentNode?c.value(m.value.parentNode):void 0)),w=(0,d.iH)(),{emit:x,on:k}=Ol(m.value,u.value),_=(0,d.B)(),S=Hl({id:e.id,el:w,disabled:(0,o.Fl)((()=>!e.draggable)),onStart(e,t,n){x.dragStart({event:e,node:t,nodes:n})},onDrag(e,t,n){x.drag({event:e,node:t,nodes:n})},onStop(e,t,n){x.dragStop({event:e,node:t,nodes:n})}}),C=Se(w,(()=>{v.value([{id:e.id,nodeElement:w.value,forceUpdate:!0}])}),{box:"content-box"}),N=(e,t)=>{m.value.computedPosition=t?Jr({x:t.x,y:t.y,z:t.z},e):e},M=()=>{w.value&&v.value([{id:e.id,nodeElement:w.value,forceUpdate:!0}]),N({x:m.value.position.x,y:m.value.position.y,z:m.value.computedPosition.z?m.value.computedPosition.z:m.value.selected?1e3:0},y.value?b({},y.value.computedPosition):void 0)};g.value((t=>{t.includes(e.id)&&M()})),(0,o.bv)((()=>{_.run((()=>{(0,o.YP)([()=>m.value.width,()=>m.value.height,()=>m.value.type,()=>m.value.sourcePosition,()=>m.value.targetPosition],(()=>{v.value([{id:e.id,nodeElement:w.value}])}),{immediate:!0,flush:"post"}),(0,o.YP)([()=>m.value.position.x,()=>m.value.position.y,()=>{var e;return null==(e=y.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=y.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=y.value)?void 0:e.computedPosition.z},()=>m.value.selected,()=>m.value.dimensions,()=>{var e;return null==(e=y.value)?void 0:e.dimensions}],(([e,t,n,o,a])=>{const r={x:e,y:t,z:m.value.selected?1e3:0};N(r,n&&o?{x:n,y:o,z:a}:void 0),m.value.handleBounds=ss(w.value,i.value.zoom)}),{immediate:!0,flush:"post"})}))})),(0,o.Jd)((()=>{C.stop(),_.stop()}));const T=e=>{S||x.mouseEnter({event:e,node:m.value,connectedEdges:Gr([m.value],n.value)})},P=e=>{S||x.mouseMove({event:e,node:m.value,connectedEdges:Gr([m.value],n.value)})},E=e=>{S||x.mouseLeave({event:e,node:m.value,connectedEdges:Gr([m.value],n.value)})},V=e=>{x.contextMenu({event:e,node:m.value,connectedEdges:Gr([m.value],n.value)})},$=e=>{x.doubleClick({event:e,node:m.value,connectedEdges:Gr([m.value],n.value)})},B=t=>{!e.selectable||r.value&&e.draggable||ls(m.value,l.value,p.value,f.value,s),x.click({event:t,node:m.value,connectedEdges:Gr([m.value],n.value)})},I=(0,o.Fl)((()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class)),H=(0,o.Fl)((()=>{const e=(m.value.style instanceof Function?m.value.style(m.value):m.value.style)||{},t=m.value.width instanceof Function?m.value.width(m.value):m.value.width,n=m.value.height instanceof Function?m.value.height(m.value):m.value.height;return t&&(e.width="string"===typeof t?t:`${t}px`),n&&(e.height="string"===typeof n?n:`${n}px`),e}));return(t,n)=>{var i;return(0,o.wg)(),(0,o.iD)("div",{ref_key:"nodeElement",ref:w,class:(0,h.C_)(["vue-flow__node",[`vue-flow__node-${e.name}`,a.value,{dragging:(0,d.SU)(S),selected:m.value.selected,selectable:e.selectable},(0,d.SU)(I)]]),style:(0,h.j5)(b({zIndex:null!=(i=m.value.computedPosition.z)?i:0,transform:`translate(${m.value.computedPosition.x}px,${m.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none"},(0,d.SU)(H))),"data-id":m.value.id,onMouseenter:T,onMousemove:P,onMouseleave:E,onContextmenu:V,onClick:B,onDblclick:$},[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.type),{id:m.value.id,type:m.value.type,data:m.value.data,events:b(b({},m.value.events),(0,d.SU)(k)),selected:!!m.value.selected,connectable:e.connectable,position:m.value.position,dimensions:m.value.dimensions,"is-valid-target-pos":m.value.isValidTargetPos,"is-valid-source-pos":m.value.isValidSourcePos,"parent-node":m.value.parentNode,dragging:(0,d.SU)(S),"z-index":m.value.computedPosition.z,"target-position":m.value.targetPosition,"source-position":m.value.sourcePosition,label:m.value.label,"drag-handle":m.value.dragHandle,onUpdateNodeInternals:M},null,40,["id","type","data","events","selected","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","dragging","z-index","target-position","source-position","label","drag-handle"]))],46,ws)}}})),ks=["transform"],_s=["width","height","x","y","rx","ry"],Ss=["y"],Cs={name:"EdgeText"},Ns=(0,o.aZ)(x(b({},Cs),{props:{x:null,y:null,label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ge("el",null);let n=(0,d.iH)({x:0,y:0,width:0,height:0});(0,o.bv)((()=>{n.value=t.value.getBBox()}));const i=(0,o.Fl)((()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`));return(t,a)=>((0,o.wg)(),(0,o.iD)("g",{transform:(0,d.SU)(i),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?((0,o.wg)(),(0,o.iD)("rect",{key:0,class:"vue-flow__edge-textbg",width:`${n.value.width+2*e.labelBgPadding[0]}px`,height:`${n.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:(0,h.j5)(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,_s)):(0,o.kq)("",!0),(0,o._)("text",(0,o.dG)(t.$attrs,{ref:"el",class:"vue-flow__edge-text",y:n.value.height/2,dy:"0.3em",style:e.labelStyle}),[(0,o.WI)(t.$slots,"default",{},(()=>["string"!==typeof e.label&&(e.label,1)?((0,o.wg)(),(0,o.j4)((0,o.LL)(e.label),{key:0})):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,h.zw)(e.label),1)],64))]))],16,Ss)],8,ks))}})),Ms=function({path:e,centerX:t,centerY:n,label:i,labelBgBorderRadius:a,labelBgPadding:r,labelBgStyle:s,labelShowBg:l,labelStyle:u,markerStart:c,markerEnd:d,style:h}){return[(0,o.h)("path",{style:b({},h),d:e,class:"vue-flow__edge-path","marker-end":d,"marker-start":c}),i?(0,o.h)(Ns,{x:t,y:n,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:s,labelBgPadding:r,labelBgBorderRadius:a}):null]};function Ts(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Ps({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let r,s;switch(e){case hr.Left:r=t-Ts(t-o,a),s=n;break;case hr.Right:r=t+Ts(o-t,a),s=n;break;case hr.Top:r=t,s=n-Ts(n-i,a);break;case hr.Bottom:r=t,s=n+Ts(i-n,a);break}return[r,s]}function Es({sourceX:e,sourceY:t,sourcePosition:n=hr.Bottom,targetX:o,targetY:i,targetPosition:a=hr.Top,curvature:r=.25}){const[s,l]=Ps({pos:n,x1:e,y1:t,x2:o,y2:i,c:r}),[u,c]=Ps({pos:a,x1:o,y1:i,x2:e,y2:t,c:r});return`M${e},${t} C${s},${l} ${u},${c} ${o},${i}`}function Vs({sourceX:e,sourceY:t,sourcePosition:n=hr.Bottom,targetX:o,targetY:i,targetPosition:a=hr.Top,curvature:r=.25}){const[s,l]=Ps({pos:n,x1:e,y1:t,x2:o,y2:i,c:r}),[u,c]=Ps({pos:a,x1:o,y1:i,x2:e,y2:t,c:r}),d=.125*e+.375*s+.375*u+.125*o,h=.125*t+.375*l+.375*c+.125*i,f=Math.abs(d-e),p=Math.abs(h-t);return[d,h,f,p]}function $s({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,r;switch(e){case hr.Left:case hr.Right:a=.5*(t+o),r=n;break;case hr.Top:case hr.Bottom:a=t,r=.5*(n+i);break}return[a,r]}function Bs({sourceX:e,sourceY:t,sourcePosition:n=hr.Bottom,targetX:o,targetY:i,targetPosition:a=hr.Top}){const[r,s]=$s({pos:n,x1:e,y1:t,x2:o,y2:i}),[l,u]=$s({pos:a,x1:o,y1:i,x2:e,y2:t});return`M${e},${t} C${r},${s} ${l},${u} ${o},${i}`}function Is({sourceX:e,sourceY:t,sourcePosition:n=hr.Bottom,targetX:o,targetY:i,targetPosition:a=hr.Top}){const[r,s]=$s({pos:n,x1:e,y1:t,x2:o,y2:i}),[l,u]=$s({pos:a,x1:o,y1:i,x2:e,y2:t}),c=.125*e+.375*r+.375*l+.125*o,d=.125*t+.375*s+.375*u+.125*i,h=Math.abs(c-e),f=Math.abs(d-t);return[c,d,h,f]}Ms.props=["path","centerX","centerY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","style"],Ms.inheritAttrs=!1;const Hs=[hr.Left,hr.Right],zs=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:i=hr.Bottom,targetPosition:a=hr.Top})=>{const r=Hs.includes(i),s=Hs.includes(a),l=r&&!s||s&&!r;if(l){const i=r?Math.abs(n-e):0,a=e>n?e-i:e+i,s=r?0:Math.abs(o-t),l=t<o?t+s:t-s;return[a,l,i,s]}const u=Math.abs(n-e)/2,c=n<e?n+u:n-u,d=Math.abs(o-t)/2,h=o<t?o+d:o-d;return[c,h,u,d]},Os=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e+n},${t}`,Ds=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t-n}`,As=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e-n},${t}`,Ys=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t-n}`,js=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t+n}`,Rs=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e+n},${t}`,Ls=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e-n},${t}`,Xs=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t+n}`;function Us({sourceX:e,sourceY:t,sourcePosition:n=hr.Bottom,targetX:o,targetY:i,targetPosition:a=hr.Top,borderRadius:r=5,centerX:s,centerY:l}){const[u,c,d,h]=zs({sourceX:e,sourceY:t,targetX:o,targetY:i}),f=Math.min(r,Math.abs(o-e)),p=Math.min(r,Math.abs(i-t)),v=Math.min(f,p,d,h),g=[hr.Left,hr.Right],m="undefined"!==typeof s?s:u,y="undefined"!==typeof l?l:c;let w,b;return e<=o?(w=t<=i?Os(e,y,v):Rs(e,y,v),b=t<=i?Xs(o,y,v):Ys(o,y,v)):(w=t<i?As(e,y,v):Ls(e,y,v),b=t<i?js(o,y,v):Ds(o,y,v)),g.includes(n)&&g.includes(a)?e<=o?(w=t<=i?Xs(m,t,v):Ys(m,t,v),b=t<=i?Os(m,i,v):Rs(m,i,v)):(n===hr.Right&&a===hr.Left||n===hr.Left&&a===hr.Right||n===hr.Left&&a===hr.Left)&&(w=t<=i?js(m,t,v):Ds(m,t,v),b=t<=i?As(m,i,v):Ls(m,i,v)):g.includes(n)&&!g.includes(a)?(w=e<=o?t<=i?Xs(o,t,v):Ys(o,t,v):t<=i?js(o,t,v):Ds(o,t,v),b=""):!g.includes(n)&&g.includes(a)&&(w=e<=o?t<=i?Os(e,i,v):Rs(e,i,v):t<=i?As(e,i,v):Ls(e,i,v),b=""),`M ${e},${t}${w}${b}L ${o},${i}`}const qs=function({sourcePosition:e=hr.Bottom,targetPosition:t=hr.Top,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:r={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:d,targetY:h,curvature:f,markerEnd:p,markerStart:v,style:g}){const[m,y]=Vs({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,curvature:f}),w=Es({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,curvature:f});return(0,o.h)(Ms,{path:w,centerX:m,centerY:y,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:r,labelBgPadding:s,labelBgBorderRadius:l,style:g,markerEnd:p,markerStart:v})};qs.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","style"],qs.inheritAttrs=!1;const Fs=function({sourcePosition:e=hr.Bottom,targetPosition:t=hr.Top,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:r={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:d,targetY:h,markerEnd:f,markerStart:p,style:v}){const[g,m]=Is({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t}),y=Bs({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t});return(0,o.h)(Ms,{path:y,centerX:g,centerY:m,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:r,labelBgPadding:s,labelBgBorderRadius:l,style:v,markerEnd:f,markerStart:p})};Fs.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],Fs.inheritAttrs=!1;const Ws=function({sourcePosition:e=hr.Bottom,targetPosition:t=hr.Top,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:r={},labelBgPadding:s,labelBgBorderRadius:l,sourceY:u,sourceX:c,targetX:d,targetY:h,markerEnd:f,markerStart:p,borderRadius:v,style:g}){const[m,y]=zs({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t}),w=Us({sourceX:c,sourceY:u,targetX:d,targetY:h,sourcePosition:e,targetPosition:t,borderRadius:v});return(0,o.h)(Ms,{path:w,centerX:m,centerY:y,label:n,labelStyle:i,labelShowBg:a,labelBgStyle:r,labelBgPadding:s,labelBgBorderRadius:l,style:g,markerEnd:f,markerStart:p})};Ws.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","style"],Ws.inheritAttrs=!1;const Zs=function(e){return(0,o.h)(Ws,x(b({},e),{borderRadius:0}))};Zs.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],Zs.inheritAttrs=!1;const Gs=function({label:e,labelStyle:t={},labelShowBg:n=!0,labelBgStyle:i={},labelBgPadding:a,labelBgBorderRadius:r,sourceY:s,sourceX:l,targetX:u,targetY:c,markerEnd:d,markerStart:h,style:f}){const p=(0,o.Fl)((()=>{const e=Math.abs(c-s)/2;return c<s?c+e:c-e})),v=(0,o.Fl)((()=>{const e=Math.abs(u-l)/2;return u<l?u+e:u-e}));return(0,o.h)(Ms,{path:`M ${l},${s}L ${u},${c}`,centerX:v.value,centerY:p.value,label:e,labelStyle:t,labelShowBg:n,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:r,style:f,markerEnd:d,markerStart:h})};Gs.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","style"],Gs.inheritAttrs=!1;const Ks=(e,t,n)=>n===hr.Left?e-t:n===hr.Right?e+t:e,Js=(e,t,n)=>n===hr.Top?e-t:n===hr.Bottom?e+t:e,Qs=function({radius:e=10,centerX:t=0,centerY:n=0,position:i=hr.Top}){const a=(0,o.Fl)((()=>{const n=Ks(t,e,i);return isNaN(n)?0:n})),r=(0,o.Fl)((()=>{const t=Js(n,e,i);return isNaN(t)?0:t}));return(0,o.h)("circle",{class:"vue-flow__edgeupdater",cx:a.value,cy:r.value,r:e,stroke:"transparent",fill:"transparent"})};Qs.props=["radius","centerX","centerY","position"];const el=function({name:e,type:t,id:n,data:i,events:a,labelBgBorderRadius:r,labelBgPadding:s,labelBgStyle:l,labelStyle:u,labelShowBg:c,style:h,animated:f,label:p,updatable:v,selectable:g,target:m,source:y,sourceNode:w,targetNode:b,sourceHandleId:x,targetHandleId:k,selected:_,markerEnd:S,markerStart:C,connectionMode:N,edgeUpdaterRadius:M},{emit:T}){var P,E;if(!w||!b)return null;let V=(0,d.iH)(!1);const $=()=>V.value=!0,B=()=>V.value=!1,I=e=>{T("source-mousedown",e)},H=e=>{T("target-mousedown",e)};let z;z=N===pr.Strict?w.handleBounds.source:null!=(P=w.handleBounds.source)?P:w.handleBounds.target;const O=ns(z,x);let D;D=N===pr.Strict?b.handleBounds.target:null!=(E=b.handleBounds.target)?E:b.handleBounds.source;const A=ns(D,k),Y=O?O.position:hr.Bottom,j=A?A.position:hr.Top,{sourceX:R,sourceY:L,targetY:X,targetX:U}=os(w,O,Y,b,A,j);return(0,o.h)("g",{class:["vue-flow__edge",`vue-flow__edge-${e}`,{updating:V.value,selected:_,animated:f,inactive:!g}]},[(0,o.h)(t,{id:n,sourceNode:w,targetNode:b,source:y,target:m,updatable:v,selected:_,animated:f,label:p,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:r,data:i,events:a,style:h,markerStart:`url(#${es(C)})`,markerEnd:`url(#${es(S)})`,sourcePosition:Y,targetPosition:j,sourceX:R,sourceY:L,targetX:U,targetY:X,sourceHandleId:x,targetHandleId:k}),v?[(0,o.h)("g",{onMousedown:I,onMouseenter:$,onMouseout:B},(0,o.h)(Qs,{position:Y,centerX:R,centerY:L,radius:M})),(0,o.h)("g",{onMousedown:H,onMouseenter:$,onMouseout:B},(0,o.h)(Qs,{position:j,centerX:U,centerY:X,radius:M}))]:null])};el.props=["name","type","id","data","events","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelStyle","labelShowBg","style","animated","label","updatable","selectable","target","source","sourceNode","targetNode","sourceHandleId","targetHandleId","selected","markerEnd","markerStart","connectionMode","edgeUpdaterRadius"],el.emits=["source-mousedown","target-mousedown"];const tl={class:"vue-flow__connection"},nl=["d","marker-end","marker-start"],ol={name:"ConnectionLine"},il=(0,o.aZ)(x(b({},ol),{props:{sourceNode:null},setup(e){var t,n,i,a;const r=xl(),s=(0,d.Vh)(r,"getNodes"),l=(0,d.Vh)(r,"connectionHandleId"),u=(0,d.Vh)(r,"connectionHandleType"),c=(0,d.Vh)(r,"connectionPosition"),f=(0,d.Vh)(r,"connectionLineType"),p=(0,d.Vh)(r,"connectionLineStyle");(0,d.Vh)(r,"connectionNodeId");const v=(0,d.Vh)(r,"connectionLineOptions"),g=(0,d.Vh)(r,"viewport"),m=null==(t=(0,o.f3)(wr))?void 0:t["connection-line"],y=null==m?void 0:m({}),w=l.value&&u.value?null==(n=e.sourceNode.handleBounds[u.value])?void 0:n.find((e=>e.id===l.value)):u.value&&(null==(a=e.sourceNode.handleBounds[null!=(i=u.value)?i:"source"])?void 0:a[0]),b=w?w.x+w.width/2:e.sourceNode.dimensions.width/2,x=w?w.y+w.height/2:e.sourceNode.dimensions.height,k=e.sourceNode.computedPosition.x+b,_=e.sourceNode.computedPosition.y+x,S=(null==w?void 0:w.position)===hr.Left||(null==w?void 0:w.position)===hr.Right,C=S?hr.Left:hr.Top,N=(0,o.Fl)((()=>(c.value.x-g.value.x)/g.value.zoom)),M=(0,o.Fl)((()=>(c.value.y-g.value.y)/g.value.zoom)),T=(0,o.Fl)((()=>{let e=`M${k},${_} ${N.value},${M.value}`;switch(f.value||v.value.type){case fr.Bezier:e=Es({sourceX:k,sourceY:_,sourcePosition:null==w?void 0:w.position,targetX:N.value,targetY:M.value,targetPosition:C});break;case fr.Step:e=Us({sourceX:k,sourceY:_,sourcePosition:null==w?void 0:w.position,targetX:N.value,targetY:M.value,targetPosition:C,borderRadius:0});break;case fr.SmoothStep:e=Us({sourceX:k,sourceY:_,sourcePosition:null==w?void 0:w.position,targetX:N.value,targetY:M.value,targetPosition:C});break}return e}));return(t,n)=>{var i;return(0,o.wg)(),(0,o.iD)("g",tl,[(0,d.SU)(y)?((0,o.wg)(),(0,o.j4)((0,o.LL)((0,d.SU)(m)),(0,h.vs)((0,o.dG)({key:0},{sourceX:k,sourceY:_,sourcePosition:null==(i=(0,d.SU)(w))?void 0:i.position,targetX:N.value,targetY:M.value,targetPosition:(0,d.SU)(C),nodes:s.value,sourceNode:e.sourceNode,sourceHandle:(0,d.SU)(w),markerEnd:`url(#${(0,d.SU)(es)(v.value.markerEnd)})`,markerStart:`url(#${(0,d.SU)(es)(v.value.markerStart)})`})),null,16)):((0,o.wg)(),(0,o.iD)("path",{key:1,d:(0,d.SU)(T),class:(0,h.C_)(["vue-flow__connection-path",v.value.class]),style:(0,h.j5)(p.value||v.value.style||{}),"marker-end":`url(#${(0,d.SU)(es)(v.value.markerEnd)})`,"marker-start":`url(#${(0,d.SU)(es)(v.value.markerStart)})`},null,14,nl))])}}})),al={name:"NodesSelection"},rl=(0,o.aZ)(x(b({},al),{setup(e){const t=xl(),n=(0,d.Vh)(t,"emits");(0,d.Vh)(t,"setState");const i=(0,d.Vh)(t,"viewport"),a=(0,d.Vh)(t,"getSelectedNodes");(0,d.Vh)(t,"snapToGrid"),(0,d.Vh)(t,"snapGrid");const r=(0,d.Vh)(t,"noPanClassName"),s=(0,d.iH)();Hl({el:s,onStart(e,t,o){n.value.selectionDragStart({event:e,node:t,nodes:o})},onDrag(e,t,o){n.value.selectionDrag({event:e,node:t,nodes:o})},onStop(e,t,o){n.value.selectionDragStop({event:e,node:t,nodes:o})}});const l=(0,o.Fl)((()=>Wr(a.value))),u=(0,o.Fl)((()=>({width:`${l.value.width}px`,height:`${l.value.height}px`,top:`${l.value.y}px`,left:`${l.value.x}px`}))),c=e=>n.value.selectionContextMenu({event:e,nodes:a.value});return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,h.C_)(["vue-flow__nodesselection vue-flow__container",r.value]),style:(0,h.j5)({transform:`translate(${i.value.x}px,${i.value.y}px) scale(${i.value.zoom})`})},[(0,o._)("div",{ref_key:"el",ref:s,class:"vue-flow__nodesselection-rect",style:(0,h.j5)((0,d.SU)(u)),onContextmenu:c},null,36)],6))}})),sl={name:"SelectionRect"},ll=(0,o.aZ)(x(b({},sl),{props:{width:null,height:null,x:null,y:null},setup(e){return(t,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"vue-flow__selection",style:(0,h.j5)({width:`${e.width}px`,height:`${e.height}px`,transform:`translate(${e.x}px, ${e.y}px)`})},null,4))}}));function ul(e){const t=e.target.closest(".vue-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const cl={ref:"user-selection",class:"vue-flow__selectionpane vue-flow__container"},dl={name:"UserSelection"},hl=(0,o.aZ)(x(b({},dl),{setup(e){const t=xl(),n=(0,d.Vh)(t,"userSelectionActive"),i=(0,d.Vh)(t,"setState"),a=(0,d.Vh)(t,"getNodes"),r=(0,d.Vh)(t,"getEdges"),s=(0,d.Vh)(t,"viewport"),l=(0,d.Vh)(t,"addSelectedEdges"),u=(0,d.Vh)(t,"addSelectedNodes"),c=ge("user-selection",null);let h=(0,d.iH)(0),f=(0,d.iH)(0);const p=()=>({width:0,height:0,startX:0,startY:0,x:0,y:0,draw:!1});let v=(0,d.iH)(p());const g=()=>{v.value=p(),h.value=0,f.value=0,i.value({userSelectionActive:!1})},m=e=>{const t=ul(e);t&&(v.value={width:0,height:0,startX:t.x,startY:t.y,x:t.x,y:t.y,draw:!0},i.value({userSelectionActive:!0,nodesSelectionActive:!1}))},y=e=>{if(!n.value||!v.value.draw)return;const t=ul(e);if(!t)return;const o=v.value.startX,i=v.value.startY,c=x(b({},v.value),{x:t.x<o?t.x:v.value.x,y:t.y<i?t.y:v.value.y,width:Math.abs(t.x-o),height:Math.abs(t.y-i)}),d=Zr(a.value,v.value,s.value),p=Gr(d,r.value);v.value=c,u.value(d),l.value(p),h.value=d.length,f.value=p.length},w=()=>{v.value=p(),i.value({nodesSelectionActive:h.value>0,userSelectionActive:!1})},k=()=>{i.value({nodesSelectionActive:h.value>0}),g()};return(0,o.bv)((()=>{te(c,"mousedown",m),te(c,"mousemove",y),te(c,"click",w),te(c,"mouseup",w),te(c,"mouseleave",k)})),(0,o.Jd)((()=>{g()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",cl,[v.value.draw?((0,o.wg)(),(0,o.j4)(ll,{key:0,width:v.value.width,height:v.value.height,x:v.value.x,y:v.value.y},null,8,["width","height","x","y"])):(0,o.kq)("",!0)],512))}})),fl={input:Mr,default:Nr,output:Tr},pl={default:qs,straight:Gs,step:Zs,smoothstep:Ws,simplebezier:Fs},vl=e=>"undefined"!==typeof e,gl=()=>({nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:gr.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultZoom:1,defaultPosition:[0,0],nodesSelectionActive:!1,userSelectionActive:!1,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:fr.Bezier,connectionLineOptions:{type:fr.Bezier,style:{}},connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN},connectionMode:pr.Loose,connectionStartHandle:null,connectOnClick:!0,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",hooks:br(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,vueFlowVersion:"0.4.26"});var ml=e=>{const t=gl();return e&&Object.keys(e).forEach((n=>{const o=e[n];vl(o)&&(t[n]=o)})),t},yl=(e,t)=>{const n=(n,o,i)=>{const a=[];n.forEach((e=>{var n,r,s,l;const u={id:e.id,type:"position",dragging:i};if(o&&(u.computedPosition=e.position,u.position=e.position,e.parentNode)){const o=t.getNode.value(e.parentNode);u.position={x:u.position.x-(null!=(r=null==(n=null==o?void 0:o.computedPosition)?void 0:n.x)?r:0),y:u.position.y-(null!=(l=null==(s=null==o?void 0:o.computedPosition)?void 0:s.y)?l:0)}}a.push(u)})),(null==a?void 0:a.length)&&e.hooks.nodesChange.trigger(a)},o=n=>{const o=n.reduce(((n,o)=>{const i=t.getNode.value(o.id);if(i){const t=Vr(o.nodeElement),a=!(!t.width||!t.height||i.dimensions.width===t.width&&i.dimensions.height===t.height&&!o.forceUpdate);i.handleBounds=ss(o.nodeElement,e.viewport.zoom),a&&(i.dimensions=t,n.push({id:i.id,type:"dimensions",dimensions:t}))}return n}),[]);o.length&&e.hooks.nodesChange.trigger(o)},i=(t,n)=>{const o=t.map((e=>e.id));let i;i=e.multiSelectionActive?o.map((e=>ds(e,n))):ps(e.nodes,o),i.length&&e.hooks.nodesChange.trigger(i)},a=(t,n)=>{const o=t.map((e=>e.id));let i;i=e.multiSelectionActive?o.map((e=>ds(e,n))):ps(e.edges,o),i.length&&e.hooks.edgesChange.trigger(i)},r=e=>{i(e,!0)},s=e=>{a(e,!0)},l=e=>{r(e.filter(Dr)),s(e.filter(zr))},u=e=>{i(e,!1)},c=e=>{a(e,!1)},h=e=>{e?(e.nodes&&u(e.nodes.filter(Dr)),e.edges&&c(e.edges.filter(zr))):(u([]),c([]))},f=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},p=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},v=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},g=t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},m=(n,o)=>{if(!e.initialized&&!n.length)return;e.nodes||(e.nodes=[]);const i=n instanceof Function?n(e.nodes):n;e.nodes=ys(i,t.getNode.value,e.nodes,null!=o?o:e.nodeExtent)},y=n=>{if(!e.initialized&&!n.length)return;const o=n instanceof Function?n(e.edges):n;e.edges=o.reduce(((n,o)=>{const i=t.getNode.value(o.source),a=t.getNode.value(o.target),r=!i||"undefined"===typeof i,s=!a||"undefined"===typeof a;if(r&&console.warn(`[vue-flow]: Couldn't create edge for source id: ${o.source}; edge id: ${o.id}`),s&&console.warn(`[vue-flow]: Couldn't create edge for target id: ${o.target}; edge id: ${o.id}`),r||s)return n;const l=t.getEdge.value(o.id);return n.push((0,d.Um)(x(b({},Yr(o,Object.assign({},l,e.defaultEdgeOptions))),{sourceNode:i,targetNode:a}))),n}),[])},w=(t,n)=>{if(!e.initialized&&!t.length||!t)return;const o=t instanceof Function?t([...e.nodes,...e.edges]):t;m(o.filter(Or),n),y(o.filter(Hr))},k=(n,o)=>{const i=n instanceof Function?n(e.nodes):n,a=ys(i,t.getNode.value,e.nodes,null!=o?o:e.nodeExtent),r=a.map(hs);r.length&&e.hooks.nodesChange.trigger(r)},_=n=>{const o=n instanceof Function?n(e.edges):n,i=o.reduce(((n,o)=>{const i=gs(b(b({},o),e.defaultEdgeOptions),e.edges);if(i){const e=t.getNode.value(i.source),o=t.getNode.value(i.target),a=!e||"undefined"===typeof e,r=!o||"undefined"===typeof o;if(a&&console.warn(`[vueflow]: Couldn't create edge for source id: ${i.source}; edge id: ${i.id}`),r&&console.warn(`[vueflow]: Couldn't create edge for target id: ${i.target}; edge id: ${i.id}`),r||a)return n;n.push(hs((0,d.Um)(x(b({},i),{sourceNode:e,targetNode:o}))))}return n}),[]);i.length&&e.hooks.edgesChange.trigger(i)},S=(t,n=!0)=>{const o=t instanceof Function?t(e.nodes):t,i=[],a=[];o.forEach((t=>{if(i.push(fs("string"===typeof t?t:t.id)),n){const n=Gr(["string"===typeof t?{id:t}:t],e.edges);a.push(...n.map((e=>fs(e.id))))}})),i.length&&e.hooks.nodesChange.trigger(i),a.length&&e.hooks.edgesChange.trigger(a)},C=t=>{const n=t instanceof Function?t(e.edges):t,o=[];n.forEach((e=>{o.push(fs("string"===typeof e?e:e.id))})),e.hooks.edgesChange.trigger(o)},N=(t,n)=>ms(t,n,e.edges,_),M=t=>cs(t,e.nodes),T=t=>cs(t,e.edges),P=t=>{var n,o;const i=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent"],a=t instanceof Function?t(e):t;"undefined"!==typeof a.modelValue&&w(a.modelValue,null!=(n=a.nodeExtent)?n:e.nodeExtent),"undefined"!==typeof a.nodes&&m(a.nodes,null!=(o=a.nodeExtent)?o:e.nodeExtent),"undefined"!==typeof a.edges&&y(a.edges),Object.keys(a).forEach((t=>{const n=a[t];!i.includes(t)&&vs(n)&&(e[t]=n)})),e.d3Zoom?("undefined"!==typeof a.maxZoom&&p(a.maxZoom),"undefined"!==typeof a.minZoom&&f(a.minZoom),"undefined"!==typeof a.translateExtent&&v(a.translateExtent)):z((()=>e.d3Zoom)).not.toBeUndefined().then((()=>{"undefined"!==typeof a.maxZoom&&p(a.maxZoom),"undefined"!==typeof a.minZoom&&f(a.minZoom),"undefined"!==typeof a.translateExtent&&v(a.translateExtent)})),e.initialized||(e.initialized=!0)},E=()=>JSON.parse(JSON.stringify({nodes:e.nodes,edges:e.edges,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),V=t=>{e.hooks.updateNodeInternals.trigger(t)};let $;e.hooks.paneReady.on((({id:e})=>{$=El(e)}));const B=async()=>new Promise((e=>{$?e($):z((()=>$)).toBeTruthy().then((()=>e($)))}));return{updateNodePositions:n,updateNodeDimensions:o,setElements:w,setNodes:m,setEdges:y,addNodes:k,addEdges:_,removeNodes:S,removeEdges:C,updateEdge:N,applyEdgeChanges:T,applyNodeChanges:M,addSelectedElements:l,addSelectedNodes:r,addSelectedEdges:s,setMinZoom:f,setMaxZoom:p,setTranslateExtent:v,removeSelectedElements:h,removeSelectedNodes:u,removeSelectedEdges:c,setInteractive:g,setState:P,fitView:async(e={padding:.1})=>{const{fitView:t}=await B();t(e)},zoomIn:async e=>{const{zoomIn:t}=await B();t(e)},zoomOut:async e=>{const{zoomOut:t}=await B();t(e)},zoomTo:async(e,t)=>{const{zoomTo:n}=await B();n(e,t)},setTransform:async(e,t)=>{const{setTransform:n}=await B();n(e,t)},getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),setCenter:async(e,t,n)=>{const{setCenter:o}=await B();o(e,t,n)},fitBounds:async(e,t)=>{const{fitBounds:n}=await B();n(e,t)},project:t=>Lr(t,e.viewport,e.snapToGrid,e.snapGrid),toObject:E,updateNodeInternals:V,$reset:()=>{P(ml())}}},wl=e=>{const t=(0,o.Fl)((()=>e.nodes.map((e=>e.id)))),n=(0,o.Fl)((()=>e.edges.map((e=>e.id)))),i=(0,o.Fl)((()=>n=>e.nodes&&!t.value.length?e.nodes.find((e=>e.id===n)):e.nodes[t.value.indexOf(n)])),a=(0,o.Fl)((()=>t=>e.edges&&!n.value.length?e.edges.find((e=>e.id===t)):e.edges[n.value.indexOf(t)])),r=(0,o.Fl)((()=>{var t;const n=b(b({},pl),e.edgeTypes),o=Object.keys(n);return null==(t=e.edges)||t.forEach((e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type))),n})),s=(0,o.Fl)((()=>{var t;const n=b(b({},fl),e.nodeTypes),o=Object.keys(n);return null==(t=e.nodes)||t.forEach((e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type))),n})),l=(0,o.Fl)((()=>{const t=e.nodes.filter((e=>!e.hidden));return e.onlyRenderVisibleElements?t&&Zr(t,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):null!=t?t:[]})),u=(t,n,o)=>(n=null!=n?n:i.value(t.source),o=null!=o?o:i.value(t.target),n&&o?!t.hidden&&o&&!o.hidden&&n&&!n.hidden&&n.dimensions.width&&n.dimensions.height&&o.dimensions.width&&o.dimensions.height:(console.warn(`[vue-flow]: Orphaned edge ${t.id} will be removed.`),e.edges.splice(e.edges.indexOf(t),1),!0)),c=(0,o.Fl)((()=>e.onlyRenderVisibleElements?e.edges.filter((t=>{const n=i.value(t.source),o=i.value(t.target);return u(t,n,o)&&is({sourcePos:n.computedPosition||{x:0,y:0},targetPos:o.computedPosition||{x:0,y:0},sourceWidth:n.dimensions.width,sourceHeight:n.dimensions.height,targetWidth:o.dimensions.width,targetHeight:o.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})})):e.edges.filter((e=>u(e))))),d=(0,o.Fl)((()=>[...l.value,...c.value])),h=(0,o.Fl)((()=>e.nodes.filter((e=>e.selected)))),f=(0,o.Fl)((()=>e.edges.filter((e=>e.selected)))),p=(0,o.Fl)((()=>{var e,t;return[...null!=(e=h.value)?e:[],...null!=(t=f.value)?t:[]]}));return{getNode:i,getEdge:a,getElements:d,getEdgeTypes:r,getNodeTypes:s,getEdges:c,getNodes:l,getSelectedElements:p,getSelectedNodes:h,getSelectedEdges:f}};class bl{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return bl.instance||(bl.instance=new bl),bl.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=ml(t),o=(0,d.qj)(n),i=wl(o),a=yl(o,i),r={};Object.entries(o.hooks).forEach((([e,t])=>{const n=`on${e.charAt(0).toUpperCase()+e.slice(1)}`;r[n]=t.on}));const s={};Object.entries(o.hooks).forEach((([e,t])=>{s[e]=t.trigger})),a.setState(o),t&&(t.modelValue&&a.setElements(t.modelValue),t.nodes&&a.setNodes(t.nodes),t.edges&&a.setEdges(t.edges));const l=x(b(b(b(b({},r),i),a),(0,d.BK)(o)),{emits:s,id:e});return this.set(e,l),l}getId(){return"vue-flow-"+this.currentId++}}var xl=e=>{const t=bl.getInstance(),n=(0,d.nZ)(),i=null==e?void 0:e.id,a=(null==n?void 0:n.vueFlowId)||i;let r;if(n){const e=(0,o.f3)(mr,null);"undefined"!==typeof e&&null!==e&&(r=e)}if(r||a&&(r=t.get(a)),!r||r&&i&&i!==r.id){const o=null!=i?i:t.getId();r=t.create(o,e),n&&(n.vueFlowId=o)}else e&&r.setState(e);if(!r)throw new Error("[vueflow]: store instance not found.");return n&&((0,o.JJ)(mr,r),C((()=>{t.get(r.id)&&t.remove(r.id),r=null}))),r};const kl=(e,t,n,o,i,a,r,s,l)=>{var u,c;const d=r.elementFromPoint(e.clientX,e.clientY),h=(null==d?void 0:d.classList.contains("target"))||!1,f=(null==d?void 0:d.classList.contains("source"))||!1,p={elementBelow:d,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(d&&(h||f)){p.isHoveringHandle=!0;const e=t!==pr.Strict||(n&&f||!n&&h);if(e){const e=null!=(u=d.getAttribute("data-nodeid"))?u:"",t=null!=(c=d.getAttribute("data-handleid"))?c:"",r=n?e:o,h=n?t:i,f=n?o:e,v=n?i:t,g={source:r,sourceHandle:h,target:f,targetHandle:v};p.connection=g,p.isValid=a(g,{edges:s,sourceNode:l(r),targetNode:l(f)})||!p.connection.target||!p.connection.source}}return p},_l=e=>{null==e||e.classList.remove("vue-flow__handle-valid"),null==e||e.classList.remove("vue-flow__handle-connecting")};var Sl=()=>{const e=xl(),t=(0,d.Vh)(e,"edges"),n=(0,d.Vh)(e,"connectOnClick"),o=(0,d.Vh)(e,"nodesConnectable"),i=(0,d.Vh)(e,"connectionStartHandle"),a=(0,d.Vh)(e,"connectionPosition"),r=(0,d.Vh)(e,"connectionMode"),s=(0,d.Vh)(e,"emits"),l=(0,d.Vh)(e,"setState"),u=(0,d.Vh)(e,"getNode");let c;const h=(e,n,i,d,h,f,p,v)=>{var g;const m=e.target.closest(".vue-flow"),y=Ir(e.target);if(!y)return;let w=null!=h?h:()=>!0;const b=u.value(i);if(b&&!1===("undefined"===typeof b.connectable?o.value:b.connectable))return;h||b&&(w=null!=(g=d?b.isValidSourcePos:b.isValidTargetPos)?g:()=>!0);const x=y.elementFromPoint(e.clientX,e.clientY),k=null==x?void 0:x.classList.contains("target"),_=null==x?void 0:x.classList.contains("source");if(!m||!k&&!_&&!f)return;const S=null!=f?f:k?"target":"source",C=m.getBoundingClientRect();function N(e){a.value.x=e.clientX-C.left,a.value.y=e.clientY-C.top;const{connection:o,elementBelow:s,isValid:l,isHoveringHandle:h}=kl(e,r.value,d,i,n,w,y,t.value,u.value);if(!h)return _l(c);const f=o.source===o.target;!f&&s&&(c=s,s.classList.add("vue-flow__handle-connecting"),s.classList.toggle("vue-flow__handle-valid",l))}function M(e){const{connection:o,isValid:a}=kl(e,r.value,d,i,n,w,y,t.value,u.value);s.value.connectStop(e);const h=o.source===o.target;a&&!h&&(p?p(o):s.value.connect(o)),s.value.connectEnd(e),f&&(null==v||v()),_l(c),l.value({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null,connectionPosition:{x:NaN,y:NaN}}),y.removeEventListener("mousemove",N),y.removeEventListener("mouseup",M)}l.value({connectionPosition:{x:e.clientX-C.left,y:e.clientY-C.top},connectionNodeId:i,connectionHandleId:n,connectionHandleType:S}),s.value.connectStart({event:e,nodeId:i,handleId:n,handleType:S}),y.addEventListener("mousemove",N),y.addEventListener("mouseup",M)},f=(e,a,c,d,h)=>{var f;if(n.value)if(i.value){let n=null!=h?h:()=>!0;const a=u.value(c);if(a&&!1===("undefined"===typeof a.connectable?o.value:a.connectable))return;h||a&&(n=null!=(f="target"!==d?a.isValidTargetPos:a.isValidSourcePos)?f:()=>!0);const p=Ir(e.target),{connection:v,isValid:g}=kl(e,r.value,"target"===i.value.type,i.value.nodeId,i.value.handleId||null,n,p,t.value,u.value),m=v.source===v.target;s.value.connectStop(e),g&&!m&&s.value.connect(v),s.value.connectEnd(e),l.value({connectionStartHandle:null})}else s.value.connectStart({event:e,nodeId:c,handleId:a,handleType:d}),l.value({connectionStartHandle:{nodeId:c,type:d,handleId:a}})};return{onMouseDown:h,onClick:f}},Cl=()=>"undefined"!==typeof window?window:{chrome:!1},Nl=(e,t)=>{const n=Cl();let i=(0,d.iH)(!1);return(0,o.m0)((()=>{t&&"function"===typeof t&&t(i.value)}),{flush:"post"}),pe((t=>!Er(t)&&(t.key===e.value||t.keyCode===e.value)),(e=>{e.preventDefault(),i.value=!0})),fe((t=>!Er(t)&&(t.key===e.value||t.keyCode===e.value)),(e=>{e.preventDefault(),i.value=!0})),ve((t=>!Er(t)&&(t.key===e.value||t.keyCode===e.value)),(e=>{e.preventDefault(),i.value=!1})),"undefined"!==typeof n.addEventListener&&te(n,"blur",(()=>{i.value=!1})),t&&"function"===typeof t&&t(i.value),i};const Ml=.1,Tl=(e,t=0)=>e.transition().duration(t),Pl=async(e,t)=>{const n=Cl();return"screen"in n&&(await z(e).toMatch((({height:e,width:t})=>!isNaN(t)&&t>0&&!isNaN(e)&&e>0)),t.length>0&&await z(t).toMatch((e=>!!e.filter((({dimensions:{width:e,height:t}})=>!isNaN(e)&&e>0&&!isNaN(t)&&t>0)).length))),!0};var El=e=>{const t=xl({id:e}),n=(0,d.Vh)(t,"onPaneReady"),o=(0,d.Vh)(t,"nodes"),i=(0,d.Vh)(t,"d3Zoom"),a=(0,d.Vh)(t,"d3Selection"),r=(0,d.Vh)(t,"dimensions"),s=(0,d.Vh)(t,"translateExtent"),l=(0,d.Vh)(t,"minZoom"),u=(0,d.Vh)(t,"maxZoom"),c=(0,d.Vh)(t,"viewport"),h=(0,d.Vh)(t,"snapToGrid"),f=(0,d.Vh)(t,"snapGrid"),p=(0,d.Vh)(t,"getNodes");let v=(0,d.iH)(!1);n.value((()=>v.value=!0));const g=async(e,t)=>{v.value||await Pl(r.value,p.value),a.value&&i.value&&i.value.scaleTo(Tl(a.value,null==t?void 0:t.duration),e)},m=async(e,t)=>{v.value||await Pl(r.value,p.value),a.value&&i.value&&i.value.scaleBy(Tl(a.value,t),e)},y=async e=>{await m(1.2,null==e?void 0:e.duration)},w=async e=>{await m(1/1.2,null==e?void 0:e.duration)},b=(e,t,n,o)=>{const{x:r,y:l}=Br({x:-e,y:-t},s.value),u=nr.translate(-r,-l).scale(n);a.value&&i.value&&i.value.transform(Tl(a.value,o),u)};return{zoomIn:y,zoomOut:w,zoomTo:g,setTransform:async(e,t)=>{v.value||await Pl(r.value,p.value),b(e.x,e.y,e.zoom,null==t?void 0:t.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:async(e={padding:Ml,includeHiddenNodes:!1,duration:0})=>{var t,n,i;if(v.value||await Pl(r.value,p.value),!p.value.length)return;let a=[];e.nodes&&(a=o.value.filter((t=>{var n;return null==(n=e.nodes)?void 0:n.includes(t.id)}))),a&&a.length||(a=e.includeHiddenNodes?a:p.value);const s=Wr(a),{x:c,y:d,zoom:h}=Kr(s,r.value.width,r.value.height,null!=(t=e.minZoom)?t:l.value,null!=(n=e.maxZoom)?n:u.value,null!=(i=e.padding)?i:Ml,e.offset);b(c,d,h,null==e?void 0:e.duration)},setCenter:async(e,t,n)=>{v.value||await Pl(r.value,p.value);const o="undefined"!==typeof(null==n?void 0:n.zoom)?n.zoom:u.value,i=r.value.width/2-e*o,a=r.value.height/2-t*o;b(i,a,o,null==n?void 0:n.duration)},fitBounds:async(e,t={padding:Ml})=>{v.value||await Pl(r.value,p.value);const{x:n,y:o,zoom:i}=Kr(e,r.value.width,r.value.height,l.value,u.value,t.padding);b(n,o,i,null==t?void 0:t.duration)},project:e=>Lr(e,c.value,h.value,f.value)}};function Vl(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n.value)return!1;o=o.parentElement}while(o);return!1}function $l(e,t,n,o){return e.filter((e=>(e.selected||e.id===o)&&(!e.parentNode||!Qr(e,n)))).map((e=>{var n,o;return{id:e.id,position:e.computedPosition||{x:0,y:0,z:0},distance:{x:t.x-(null==(n=e.computedPosition)?void 0:n.x)||0,y:t.y-(null==(o=e.computedPosition)?void 0:o.y)||0},extent:e.extent,parentNode:e.parentNode,dimensions:e.dimensions}}))}function Bl({id:e,dragItems:t,getNode:n}){const o=t.map((e=>{const t=n.value(e.id);return b({},t)}));return[e?o.find((t=>t.id===e)):o[0],o]}function Il(e,t,n,o){var i,a,r,s;let l=e.extent||o;const u={x:t.x-e.distance.x,y:t.y-e.distance.y};if("parent"===e.extent&&n)e.parentNode&&e.dimensions.width&&e.dimensions.height&&(l=n.computedPosition&&n.dimensions.width&&n.dimensions.height?[[n.computedPosition.x,n.computedPosition.y],[n.computedPosition.x+n.dimensions.width-e.dimensions.width,n.computedPosition.y+n.dimensions.height-e.dimensions.height]]:l);else if(e.extent&&e.parentNode){const t=e.extent,o=null!=(a=null==(i=null==n?void 0:n.computedPosition)?void 0:i.x)?a:0,u=null!=(s=null==(r=null==n?void 0:n.computedPosition)?void 0:r.y)?s:0;l=[[t[0][0]+o,t[0][1]+u],[t[1][0]+o,t[1][1]+u]]}return e.position=l?Br(u,l):u,e}function Hl(e){const t=(0,d.B)(),n=t.run((()=>{const t=xl(),n=(0,d.Vh)(t,"viewport"),i=(0,d.Vh)(t,"snapToGrid"),a=(0,d.Vh)(t,"snapGrid"),r=(0,d.Vh)(t,"noDragClassName"),s=(0,d.Vh)(t,"nodes"),l=(0,d.Vh)(t,"nodeExtent"),u=(0,d.Vh)(t,"getNode"),c=(0,d.Vh)(t,"multiSelectionActive"),h=(0,d.Vh)(t,"nodesSelectionActive"),f=(0,d.Vh)(t,"selectNodesOnDrag"),p=(0,d.Vh)(t,"removeSelectedElements"),v=(0,d.Vh)(t,"addSelectedNodes"),g=(0,d.Vh)(t,"updateNodePositions"),m=e,y=(0,d.Vh)(m,"onStart"),w=(0,d.Vh)(m,"onDrag"),b=(0,d.Vh)(m,"onStop"),x=(0,d.Vh)(m,"el"),k=(0,d.Vh)(m,"disabled",!1),_=(0,d.Vh)(m,"id"),S=(0,d.iH)(!1);let C=(0,d.iH)(),N=(0,d.iH)({x:void 0,y:void 0}),M=(0,d.iH)();const T=e=>(null!=e?e:i.value)?a.value:void 0,P=(e,t)=>{const o=e.sourceEvent.touches?e.sourceEvent.touches[0].clientX:e.sourceEvent.clientX,i=e.sourceEvent.touches?e.sourceEvent.touches[0].clientY:e.sourceEvent.clientY;return Lr({x:o,y:i},n.value,!!t,null!=t?t:a.value)};return(0,o.YP)([()=>k.value,()=>x.value],(()=>{if(x.value){const e=Bn(x.value),t=_.value?u.value(_.value):void 0;k.value?e.on(".drag",null):(M.value=Wn().on("start",(e=>{f.value||c.value||!_.value||(null==t?void 0:t.selected)||p.value(),t&&!k.value&&f.value&&ls(t,c.value,v.value,p.value,h);const n=P(e,T(null==t?void 0:t.snapGrid));if(C.value=$l(s.value,n,u.value,_.value),y.value&&C.value){const[t,n]=Bl({id:_.value,dragItems:C.value,getNode:u});y.value(e.sourceEvent,t,n)}})).on("drag",(e=>{const n=P(e,T(null==t?void 0:t.snapGrid));if((N.value.x!==n.x||N.value.y!==n.y)&&C.value&&(N.value=n,C.value=C.value.map((e=>Il(e,n,e.parentNode?u.value(e.parentNode):void 0,l.value))),g.value(C.value,!0,!0),S.value=!0,w.value)){const[t,n]=Bl({id:_.value,dragItems:C.value,getNode:u});w.value(e.sourceEvent,t,n)}e.on("end",(e=>{if(S.value=!1,b.value&&C.value){g.value(C.value,!1,!1);const[t,n]=Bl({id:_.value,dragItems:C.value,getNode:u});b.value(e.sourceEvent,t,n)}}))})).filter((e=>{const n=e.target;return!e.button&&(!r.value||!Vl(n,`.${r.value}`,x)&&(!(null==t?void 0:t.dragHandle)||Vl(n,t.dragHandle,x)))})),e.call(M.value))}}),{flush:"post"}),S}));return C((()=>t.stop())),n}const zl=()=>({doubleClick:S(),click:S(),mouseEnter:S(),mouseMove:S(),mouseLeave:S(),contextMenu:S(),dragStart:S(),drag:S(),dragStop:S()});function Ol(e,t){const n=zl();return n.doubleClick.on((n=>{var o,i;t.nodeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.nodeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.nodeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.nodeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.nodeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.nodeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.dragStart.on((n=>{var o,i;t.nodeDragStart(n),null==(i=null==(o=e.events)?void 0:o.dragStart)||i.call(o,n)})),n.drag.on((n=>{var o,i;t.nodeDrag(n),null==(i=null==(o=e.events)?void 0:o.drag)||i.call(o,n)})),n.dragStop.on((n=>{var o,i;t.nodeDragStop(n),null==(i=null==(o=e.events)?void 0:o.dragStop)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}const Dl=()=>({doubleClick:S(),click:S(),mouseEnter:S(),mouseMove:S(),mouseLeave:S(),contextMenu:S(),updateStart:S(),update:S(),updateEnd:S()});function Al(e,t){const n=Dl();return n.doubleClick.on((n=>{var o,i;t.edgeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.edgeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.edgeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.edgeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.edgeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.edgeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.updateStart.on((n=>{var o,i;t.edgeUpdateStart(n),null==(i=null==(o=e.events)?void 0:o.updateStart)||i.call(o,n)})),n.update.on((n=>{var o,i;t.edgeUpdate(n),null==(i=null==(o=e.events)?void 0:o.update)||i.call(o,n)})),n.updateEnd.on((n=>{var o,i;t.edgeUpdateEnd(n),null==(i=null==(o=e.events)?void 0:o.updateEnd)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}const Yl={name:"SelectionPane",inheritAttrs:!1},jl=(0,o.aZ)(x(b({},Yl),{setup(e){const t=xl(),n=(0,d.Vh)(t,"id"),i=(0,d.Vh)(t,"edges"),a=(0,d.Vh)(t,"deleteKeyCode"),r=(0,d.Vh)(t,"selectionKeyCode"),s=(0,d.Vh)(t,"multiSelectionKeyCode"),l=(0,d.Vh)(t,"emits"),u=(0,d.Vh)(t,"nodesSelectionActive"),c=(0,d.Vh)(t,"userSelectionActive"),h=(0,d.Vh)(t,"elementsSelectable"),f=(0,d.Vh)(t,"removeSelectedElements"),p=(0,d.Vh)(t,"setState"),v=(0,d.Vh)(t,"getSelectedEdges"),g=(0,d.Vh)(t,"getSelectedNodes"),m=e=>{l.value.paneClick(e),p.value({nodesSelectionActive:!1}),f.value()},y=e=>l.value.paneContextMenu(e),w=e=>l.value.paneScroll(e);Nl(a,(e=>{var t;const n=g.value,o=v.value;if(e&&(n||o)){const e=null!=(t=n&&Gr(n,i.value))?t:[],a=n.map((e=>({id:e.id,type:"remove"}))),r=[...o,...e].map((e=>({id:e.id,type:"remove"})));l.value.nodesChange(a),l.value.edgesChange(r),p.value({nodesSelectionActive:!1}),f.value()}})),Nl(s,(e=>{p.value({multiSelectionActive:e})}));const b=Nl(r,(e=>{c.value&&e||p.value({userSelectionActive:e&&h.value})}));return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,d.SU)(b)?((0,o.wg)(),(0,o.j4)((0,d.SU)(hl),{key:`user-selection-${n.value}`})):(0,o.kq)("",!0),u.value?((0,o.wg)(),(0,o.j4)((0,d.SU)(rl),{key:`nodes-selection-${n.value}`})):(0,o.kq)("",!0),((0,o.wg)(),(0,o.iD)("div",{key:`pane-${n.value}`,class:"vue-flow__pane vue-flow__container",onClick:m,onContextmenu:y,onWheel:w},null,32))],64))}})),Rl={class:"vue-flow__nodes vue-flow__container"},Ll={name:"Nodes"},Xl=(0,o.aZ)(x(b({},Ll),{setup(e){const t=(0,o.f3)(wr),n=xl(),i=(0,d.Vh)(n,"nodesDraggable"),a=(0,d.Vh)(n,"elementsSelectable"),r=(0,d.Vh)(n,"nodesConnectable");(0,d.Vh)(n,"noPanClassName"),(0,d.Vh)(n,"snapToGrid"),(0,d.Vh)(n,"snapGrid"),(0,d.Vh)(n,"getNode");const s=(0,d.Vh)(n,"getNodes"),l=(0,d.Vh)(n,"getNodeTypes"),u=e=>"undefined"===typeof e?i.value:e,c=e=>"undefined"===typeof e?a.value:e,h=e=>"undefined"===typeof e?r.value:e,f=(e,n)=>{const i=e||"default";let a=null!=n?n:l.value[i];const r=(0,o.FN)();if("string"===typeof a&&r){const e=Object.keys(r.appContext.components);e&&e.includes(i)&&(a=(0,o.up)(i,!1))}if("string"!==typeof a)return a;const s=null==t?void 0:t[`node-${i}`];return(null==s?void 0:s({}))?s:(console.warn(`[vueflow]: Node type "${e}" not found and no node-slot detected. Using fallback type "default".`),!1)};return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Rl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.value,(e=>((0,o.wg)(),(0,o.j4)((0,d.SU)(xs),{id:e.id,key:e.id,type:f(e.type,e.template),name:e.type||"default",draggable:u(e.draggable),selectable:c(e.selectable),connectable:h(e.connectable)},null,8,["id","type","name","draggable","selectable","connectable"])))),128))]))}})),Ul=["id","markerWidth","markerHeight","markerUnits","orient"],ql=["stroke","stroke-width","fill"],Fl=["stroke","stroke-width"],Wl={name:"MarkerType"},Zl=(0,o.aZ)(x(b({},Wl),{props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto"},strokeWidth:{default:1}},setup(e){return(t,n)=>((0,o.wg)(),(0,o.iD)("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},["arrowclosed"===e.type?((0,o.wg)(),(0,o.iD)("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,ql)):(0,o.kq)("",!0),"arrow"===e.type?((0,o.wg)(),(0,o.iD)("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,Fl)):(0,o.kq)("",!0)],8,Ul))}})),Gl={name:"MarkerDefinitions"},Kl=(0,o.aZ)(x(b({},Gl),{setup(e){const t=xl(),n=(0,d.Vh)(t,"edges"),i=(0,d.Vh)(t,"connectionLineOptions"),a=(0,d.Vh)(t,"defaultMarkerColor"),r=(0,o.Fl)((()=>{const e=[],t=[],o=n=>{if(n){const o=es(n);e.includes(o)||("object"===typeof n?t.push(x(b({},n),{id:o,color:n.color||a.value})):t.push({id:o,color:a.value,type:n}),e.push(o))}};return[i.value.markerEnd,i.value.markerStart].forEach(o),n.value.reduce(((e,t)=>([t.markerStart,t.markerEnd].forEach(o),e.sort(((e,t)=>e.id.localeCompare(t.id))))),t),t}));return(e,t)=>((0,o.wg)(),(0,o.iD)("defs",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,d.SU)(r),(e=>((0,o.wg)(),(0,o.j4)(Zl,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))]))}})),Jl={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ql={name:"Edges"},eu=(0,o.aZ)(x(b({},Ql),{setup(e){const t=(0,o.f3)(wr),n=xl(),i=(0,d.Vh)(n,"emits"),a=(0,d.Vh)(n,"connectionMode"),r=(0,d.Vh)(n,"edgeUpdaterRadius"),s=(0,d.Vh)(n,"onPaneReady"),l=(0,d.Vh)(n,"connectionNodeId"),u=(0,d.Vh)(n,"nodesConnectable"),c=(0,d.Vh)(n,"connectionHandleType"),f=(0,d.Vh)(n,"edgesUpdatable"),p=(0,d.Vh)(n,"elementsSelectable"),v=(0,d.Vh)(n,"getSelectedNodes"),g=(0,d.Vh)(n,"nodesSelectionActive"),m=(0,d.Vh)(n,"getNode");(0,d.Vh)(n,"getNodes");const y=(0,d.Vh)(n,"getEdges"),w=(0,d.Vh)(n,"getEdgeTypes"),x=(0,d.Vh)(n,"addSelectedEdges"),k=(0,d.Vh)(n,"noPanClassName"),S=(0,d.Vh)(n,"elevateEdgesOnSelect"),C=e=>"undefined"===typeof e?p.value:e,N=e=>"undefined"===typeof e?f.value:e,M=_(l,(()=>!!l.value&&m.value(l.value))),T=_(l,(()=>!!(M.value&&("undefined"===typeof M.value.connectable?u.value:M.value.connectable)&&l.value&&c.value))),P=(0,d.iH)({});let E=(0,d.iH)([]);const V=(0,d.B)();s.value((()=>{V.run((()=>{const e=(0,o.Fl)((()=>y.value.length));(0,o.YP)([v,e],(()=>{y.value.forEach((e=>{P.value[e.id]||(P.value[e.id]=Al(e,i.value))})),S.value?(0,o.Y3)((()=>E.value=as(y.value,m.value))):E.value=[{isMaxLevel:!0,edges:y.value,level:0}]}),{flush:"post",immediate:!0})}))})),(0,o.Jd)((()=>V.stop()));const $=(e,n)=>{const i=e||"default";let a=null!=n?n:w.value[i];const r=(0,o.FN)();if("string"===typeof a&&r){const e=Object.keys(r.appContext.components);e&&e.includes(i)&&(a=(0,o.up)(i,!1))}if(a&&"string"!==typeof a)return a;const s=null==t?void 0:t[`edge-${i}`];return(null==s?void 0:s({}))?s:(console.warn(`[vueflow]: Edge type "${e}" not found and no edge-slot detected. Using fallback type "default".`),!1)},B=(e,t)=>{const n={event:e,edge:t};C(t.selectable)&&(g.value=!1,x.value([t])),P.value[t.id].emit.click(n)},I=(e,t)=>P.value[t.id].emit.contextMenu({event:e,edge:t}),H=(e,t)=>P.value[t.id].emit.doubleClick({event:e,edge:t}),z=(e,t)=>P.value[t.id].emit.mouseEnter({event:e,edge:t}),O=(e,t)=>P.value[t.id].emit.mouseMove({event:e,edge:t}),D=(e,t)=>P.value[t.id].emit.mouseLeave({event:e,edge:t}),A=(e,t)=>R(e,t,!0),Y=(e,t)=>R(e,t,!1),{onMouseDown:j}=Sl(),R=(e,t,n)=>{var o;const i=n?t.target:t.source,a=null!=(o=n?t.targetHandle:t.sourceHandle)?o:"";P.value[t.id].emit.updateStart({event:e,edge:t}),j(e,a,i,n,void 0,n?"target":"source",(e=>{Rr(e,y.value)||P.value[t.id].emit.update({edge:t,connection:e})}),(()=>P.value[t.id].emit.updateEnd({event:e,edge:t})))},L=e=>{const t=e.class instanceof Function?e.class(e):e.class;return[k.value,t]},X=e=>e.style instanceof Function?e.style(e):e.style;return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(E.value,(e=>((0,o.wg)(),(0,o.iD)("svg",{key:e.level,class:"vue-flow__edges vue-flow__container",style:(0,h.j5)(`z-index: ${e.level}`)},[e.isMaxLevel?((0,o.wg)(),(0,o.j4)(Kl,{key:0})):(0,o.kq)("",!0),(0,o._)("g",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.edges,(e=>((0,o.wg)(),(0,o.j4)((0,d.SU)(el),{id:e.id,key:e.id,type:$(e.type,e.template),name:e.type||"default",source:e.source,target:e.target,"target-handle-id":e.targetHandle,"source-handle-id":e.sourceHandle,"source-node":m.value(e.source),"target-node":m.value(e.target),label:e.label,data:e.data,events:b(b({},e.events),P.value[e.id].on),animated:e.animated,selectable:C(e.selectable),selected:e.selected,updatable:N(e.updatable),"label-style":e.labelStyle,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"connection-mode":a.value,"edge-updater-radius":r.value,"marker-end":e.markerEnd,"marker-start":e.markerStart,style:(0,h.j5)(X(e)),class:(0,h.C_)(L(e)),onClick:t=>B(t,e),onDblclick:t=>H(t,e),onContextmenu:t=>I(t,e),onMouseenter:t=>z(t,e),onMousemove:t=>O(t,e),onMouseleave:t=>D(t,e),onSourceMousedown:t=>A(t,e),onTargetMousedown:t=>Y(t,e)},null,8,["id","type","name","source","target","target-handle-id","source-handle-id","source-node","target-node","label","data","events","animated","selectable","selected","updatable","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","connection-mode","edge-updater-radius","marker-end","marker-start","style","class","onClick","onDblclick","onContextmenu","onMouseenter","onMousemove","onMouseleave","onSourceMousedown","onTargetMousedown"])))),128))])],4)))),128)),T.value&&M.value?((0,o.wg)(),(0,o.iD)("svg",Jl,[(0,o.Wm)(il,{"source-node":M.value},null,8,["source-node"])])):(0,o.kq)("",!0)],64))}})),tu={name:"Transform"},nu=(0,o.aZ)(x(b({},tu),{setup(e){const t=xl(),{id:n,nodes:i,edges:a,viewport:r,snapToGrid:s,snapGrid:l,dimensions:u,setState:c,fitViewOnInit:f,emits:p,fitView:v}=t,g=k(t,["id","nodes","edges","viewport","snapToGrid","snapGrid","dimensions","setState","fitViewOnInit","emits","fitView"]),m=async e=>{const t=Cl();return"screen"in t&&await z(e).toMatch((({height:e,width:t})=>!isNaN(t)&&t>0&&!isNaN(e)&&e>0)),!0};let y=(0,d.iH)(!1);return(0,o.bv)((async()=>{await m(u.value),y.value=!0,p.paneReady(b({id:n,nodes:i,edges:a,viewport:r,snapToGrid:s,snapGrid:l,dimensions:u,setState:c,fitViewOnInit:f,fitView:v,emits:p},g)),(null==f?void 0:f.value)&&v()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:`transform-${(0,d.SU)(n)}`,class:"vue-flow__transformationpane vue-flow__container",style:(0,h.j5)({transform:`translate(${(0,d.SU)(r).x}px,${(0,d.SU)(r).y}px) scale(${(0,d.SU)(r).zoom})`,opacity:y.value?void 0:0})},[(0,o.Wm)(eu),(0,o.Wm)(Xl),(0,o.WI)(e.$slots,"default")],4))}})),ou={name:"Viewport"},iu=(0,o.aZ)(x(b({},ou),{setup(e){const t=xl(),n=(0,d.Vh)(t,"id"),i=(0,d.Vh)(t,"minZoom"),a=(0,d.Vh)(t,"maxZoom"),r=(0,d.Vh)(t,"defaultZoom"),s=(0,d.Vh)(t,"defaultPosition"),l=(0,d.Vh)(t,"translateExtent"),u=(0,d.Vh)(t,"dimensions"),c=(0,d.Vh)(t,"zoomActivationKeyCode"),h=(0,d.Vh)(t,"selectionKeyCode"),f=(0,d.Vh)(t,"panOnScroll"),p=(0,d.Vh)(t,"panOnScrollMode"),v=(0,d.Vh)(t,"panOnScrollSpeed"),g=(0,d.Vh)(t,"panOnDrag"),m=(0,d.Vh)(t,"zoomOnDoubleClick"),y=(0,d.Vh)(t,"zoomOnPinch"),w=(0,d.Vh)(t,"zoomOnScroll"),k=(0,d.Vh)(t,"preventScrolling"),_=(0,d.Vh)(t,"noWheelClassName"),S=(0,d.Vh)(t,"noPanClassName"),C=(0,d.Vh)(t,"setState"),N=(0,d.Vh)(t,"emits"),M=ge("viewport",null),T=(e,t)=>e.x!==t.x&&!isNaN(t.x)||e.y!==t.y&&!isNaN(t.y)||e.zoom!==t.k&&!isNaN(t.k),P=e=>({x:e.x,y:e.y,zoom:e.k}),E=(e,t)=>e.target.closest(`.${t}`),V=$r(r.value,i.value,a.value);let $=(0,d.iH)(x(b({},Br({x:s.value[0],y:s.value[1]},l.value)),{zoom:V}));const{width:B,height:I}=Ce(M),H=(0,o.YP)([B,I],(([e,t])=>{u.value.width=e,u.value.height=t}),{immediate:!0});return(0,o.Jd)((()=>H())),(0,o.bv)((()=>{const e=Cl();"screen"in e&&te(e,"onresize",(()=>{if(!M.value)return;const{width:e,height:t}=Vr(M.value);u.value.width=e,u.value.height=t}));const t=dr().scaleExtent([i.value,a.value]).translateExtent(l.value),n=Bn(M.value).call(t),o=n.on("wheel.zoom"),r=nr.translate($.value.x,$.value.y).scale($.value.zoom);t.transform(n,r),C.value({d3Zoom:t,d3Selection:n,d3ZoomHandler:o,viewport:{x:r.x,y:r.y,zoom:r.k}});const s=Nl(h,(e=>{e?t.on("zoom",null):t.on("zoom",(e=>{C.value({viewport:{x:e.transform.x,y:e.transform.y,zoom:e.transform.k}});const t=P(e.transform);N.value.move({event:e,flowTransform:t})}))})),d=Nl(c);t.on("start",(e=>{const t=P(e.transform);$.value=t,N.value.moveStart({event:e,flowTransform:t})})),t.on("end",(e=>{if(T($.value,e.transform)){const t=P(e.transform);$.value=t,N.value.moveEnd({event:e,flowTransform:t})}})),n.on("wheel",(e=>{if(f.value&&!d.value){if(E(e,_.value))return;e.preventDefault(),e.stopImmediatePropagation();const o=(null==n?void 0:n.property("__zoom").k)||1;if(e.ctrlKey&&y.value){const i=Hn(e),a=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,r=o*2**a;return void(n&&t.scaleTo(n,r,i))}const i=1===e.deltaMode?20:1,a=p.value===gr.Vertical?0:e.deltaX*i,r=p.value===gr.Horizontal?0:e.deltaY*i;n&&v.value&&t.translateBy(n,-a/o*v.value,-r/o*v.value)}else{if(!w.value&&k.value||!k.value||E(e,_.value))return null;e.preventDefault()}})).on("wheel.zoom",f.value||"undefined"===typeof o?null:o),t.filter((e=>{const t=d.value||w.value,n=y.value&&e.ctrlKey;return!!(g.value||t||f.value||m.value||y.value)&&(!s.value&&(!(!m.value&&"dblclick"===e.type)&&((!E(e,_.value)||"wheel"!==e.type)&&((!E(e,S.value)||"wheel"===e.type)&&(!(!y.value&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||f.value||n||"wheel"!==e.type)&&(!!(g.value||"mousedown"!==e.type&&"touchstart"!==e.type)&&((!e.ctrlKey||"wheel"===e.type)&&!e.button))))))))}))})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{ref:"viewport",key:`viewport-${n.value}`,class:"vue-flow__viewport vue-flow__container"},[(0,o.Wm)(nu,null,{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3}),(0,o.Wm)(jl)]))}})),au=e=>"undefined"!==typeof e;var ru=(e,t,n)=>{const i=(0,d.B)();return i.run((()=>{const a=()=>{i.run((()=>{let t,i;t=J([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([a])=>{a&&Array.isArray(a)&&(i&&i.pause(),t&&t.pause(),n.setElements(a),i=J([n.edges,n.nodes,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,i])=>{t&&t.pause();const a=[...i,...n];a.length&&(e.modelValue.value=a),(0,o.Y3)((()=>{t&&t.resume()}))}),{immediate:!0,flush:"post"}),(0,o.Y3)((()=>{i&&i.resume(),t&&t.resume()})))}),{immediate:!(!e.modelValue||!e.modelValue.value),flush:"post"})}))},r=()=>{i.run((()=>{let t,i;t=J([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(async([a])=>{a&&Array.isArray(a)&&(i&&i.pause(),t&&t.pause(),n.setNodes(a),i=J((()=>n.nodes.value.length),(()=>{n.nodes.value.length&&(e.nodes.value=[...n.nodes.value])}),{immediate:!0}),(0,o.Y3)((()=>{i&&i.resume(),t&&t.resume()})))}),{immediate:!(!e.nodes||!e.nodes.value),flush:"post"})}))},s=()=>{i.run((()=>{let t,i;t=J([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(async([a])=>{a&&Array.isArray(a)&&(i&&i.pause(),t&&t.pause(),n.setEdges(a),i=J((()=>n.edges.value.length),(()=>{n.edges.value.length&&(e.edges.value=[...n.edges.value])}),{immediate:!0}),(0,o.Y3)((()=>{i&&i.resume(),t&&t.resume()})))}),{immediate:!(!e.edges||!e.edges.value),flush:"post"})}))},l=()=>{i.run((()=>{(0,o.YP)((()=>t.maxZoom),(()=>{t.maxZoom&&au(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:au(t.maxZoom)})}))},u=()=>{i.run((()=>{(0,o.YP)((()=>t.minZoom),(()=>{t.minZoom&&au(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:au(t.minZoom)})}))},c=()=>{i.run((()=>{(0,o.YP)((()=>t.applyDefault),(()=>{au(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:au(t.applyDefault)}),(0,o.YP)(n.applyDefault,(()=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges))}),{immediate:!0})}))},d=()=>{i.run((()=>{(0,o.YP)((()=>t.autoConnect),(()=>{au(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:au(t.autoConnect)}),(0,o.YP)(n.autoConnect,(()=>{const e=async e=>{let o=!0;T(t.autoConnect)&&(o=await t.autoConnect(e)),o&&n.addEdges([e])};n.autoConnect?n.onConnect(e):n.hooks.value.connect.off(e)}),{immediate:!0})}))},h=()=>{const e=["id","modelValue","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach((a=>{if(!e.includes(a)){const e=t[a],r=n[a];i.run((()=>{(0,o.YP)((()=>e),(()=>{e&&au(e)&&(r.value=e)}),{immediate:au(e)})}))}}))};[a,r,s,u,l,c,d,h].forEach((e=>e()))})),()=>i.stop()};const su={class:"vue-flow"},lu={name:"VueFlow"},uu=(0,o.aZ)(x(b({},lu),{props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:null,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:Boolean,default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:Boolean,default:void 0},minZoom:null,maxZoom:null,defaultZoom:null,defaultPosition:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectStop","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","paneReady","paneScroll","paneClick","paneContextMenu","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{emit:t}){const n=e,i=Ne(n,"modelValue",t),a=Ne(n,"nodes",t),r=Ne(n,"edges",t),s=xl({id:n.id}),{id:l,hooks:u,getNodeTypes:c,getEdgeTypes:h,$reset:f}=s,p=k(s,["id","hooks","getNodeTypes","getEdgeTypes","$reset"]),v=ru({modelValue:i,nodes:a,edges:r},n,b({id:l,hooks:u,getNodeTypes:c,getEdgeTypes:h,$reset:f},p));return(0,o.Ah)((()=>{v(),f()})),kr(t,u.value),(0,o.JJ)(wr,(0,o.Rr)()),(e,t)=>((0,o.wg)(),(0,o.iD)("div",su,[(0,o.Wm)(iu,null,{nodes:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys((0,d.SU)(c)),(t=>(0,o.WI)(e.$slots,`node-${t}`))),256))])),edges:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys((0,d.SU)(h)),(t=>(0,o.WI)(e.$slots,`edge-${t}`))),256))])),"connection-name":(0,o.w5)((()=>[(0,o.WI)(e.$slots,"connection-line")])),default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"zoom-pane")])),_:3}),(0,o.WI)(e.$slots,"default")]))}})),cu=function({position:{x:e,y:t},dimensions:{height:n,width:i},strokeWidth:a,strokeColor:r,borderRadius:s,color:l,shapeRendering:u="geometricPrecision"},{attrs:c,emit:d,slots:h}){var f,p;const v=null!=(f=c.style)?f:{};return[(0,o.h)("rect",{class:["vue-flow__minimap-node",c.class].join(" "),style:v,x:e,y:t,rx:s,ry:s,width:i,height:n,fill:l||v.background||v.backgroundColor,stroke:r,strokeWidth:a,shapeRendering:u,onClick:e=>d("click",e),onDblClick:e=>d("dblclick",e),onMouseenter:e=>d("mouseenter",e),onMousemove:e=>d("mousemove",e),onMouseleave:e=>d("mouseleave",e)}),null==(p=null==h?void 0:h.default)?void 0:p.call(h)]};cu.props=["position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering"],cu.emits=["click","dblclick","mouseenter","mousemove","mouseleave"];const du=["width","height","viewBox"],hu=["d","fill"],fu={name:"MiniMap"};x(b({},fu),{props:{nodeColor:{type:[String,Function],default:"#fff"},nodeStrokeColor:{type:[String,Function],default:"#555"},nodeClassName:null,nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 242, 243, 0.7)"},width:null,height:null},emits:["nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=(0,o.l1)(),i=Cl(),a=200,r=150,s=xl(),l=(0,d.Vh)(s,"edges"),u=(0,d.Vh)(s,"viewport"),c=(0,d.Vh)(s,"dimensions"),f=(0,d.Vh)(s,"emits"),p=(0,d.Vh)(s,"getNodes"),v=(0,o.Fl)((()=>{var t,o,i;return null!=(i=null!=(o=e.width)?o:null==(t=n.style)?void 0:t.width)?i:a})),g=(0,o.Fl)((()=>{var t,o,i;return null!=(i=null!=(o=e.height)?o:null==(t=n.style)?void 0:t.height)?i:r})),m=e.nodeColor instanceof Function?e.nodeColor:()=>e.nodeColor,y=e.nodeStrokeColor instanceof Function?e.nodeStrokeColor:()=>e.nodeStrokeColor,w=e.nodeClassName instanceof Function?e.nodeClassName:()=>e.nodeClassName,b="undefined"===typeof i||i.chrome?"crispEdges":"geometricPrecision",x=(0,o.Fl)((()=>Wr(p.value))),k=(0,o.Fl)((()=>({x:-u.value.x/u.value.zoom,y:-u.value.y/u.value.zoom,width:c.value.width/u.value.zoom,height:c.value.height/u.value.zoom}))),S=_(k,(()=>{const e=p.value&&p.value.length?Fr(x.value,k.value):k.value,t=e.width/v.value,n=e.height/g.value,o=Math.max(t,n),i=o*v.value,a=o*g.value,r=5*o;return{offset:r,x:e.x-(i-e.width)/2-r,y:e.y-(a-e.height)/2-r,width:i+2*r,height:a+2*r}})),C=_(S,(()=>S.value.x&&S.value.y?`\n    M${S.value.x-S.value.offset},${S.value.y-S.value.offset}\n    h${S.value.width+2*S.value.offset}\n    v${S.value.height+2*S.value.offset}\n    h${-S.value.width-2*S.value.offset}z\n    M${k.value.x},${k.value.y}\n    h${k.value.width}\n    v${k.value.height}\n    h${-k.value.width}z`:"")),N=(e,n)=>{const o={event:e,node:n,connectedEdges:Gr([n],l.value)};f.value.miniMapNodeClick(o),t("nodeClick",o)},M=(e,n)=>{const o={event:e,node:n,connectedEdges:Gr([n],l.value)};f.value.miniMapNodeDoubleClick(o),t("nodeDblclick",o)},T=(e,n)=>{const o={event:e,node:n,connectedEdges:Gr([n],l.value)};f.value.miniMapNodeMouseEnter(o),t("nodeMouseenter",o)},P=(e,n)=>{const o={event:e,node:n,connectedEdges:Gr([n],l.value)};f.value.miniMapNodeMouseMove(o),t("nodeMousemove",o)},E=(e,n)=>{const o={event:e,node:n,connectedEdges:Gr([n],l.value)};f.value.miniMapNodeMouseLeave(o),t("nodeMouseleave",o)};return(t,n)=>((0,o.wg)(),(0,o.iD)("svg",{width:v.value,height:g.value,viewBox:[S.value.x,S.value.y,S.value.width,S.value.height].join(" "),class:"vue-flow__minimap"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.value,(n=>((0,o.wg)(),(0,o.j4)((0,d.SU)(cu),{id:n.id,key:n.id,position:n.computedPosition,dimensions:n.dimensions,style:(0,h.j5)(n.style),class:(0,h.C_)((0,d.SU)(w)(n)),color:(0,d.SU)(m)(n),"border-radius":e.nodeBorderRadius,"stroke-color":(0,d.SU)(y)(n),"stroke-width":e.nodeStrokeWidth,"shape-rendering":(0,d.SU)(b),onClick:e=>N(e,n),onDblclick:e=>M(e,n),onMouseenter:e=>T(e,n),onMousemove:e=>P(e,n),onMouseleave:e=>E(e,n)},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,`node-${n.type}`,{id:n.id,parentNode:n.parentNode,selected:n.selected,position:n.computedPosition,dimensions:n.dimensions,style:(0,h.j5)(n.style),class:(0,h.C_)((0,d.SU)(w)(n)),color:(0,d.SU)(m)(n),borderRadius:e.nodeBorderRadius,strokeColor:(0,d.SU)(y)(n),strokeWidth:e.nodeStrokeWidth,shapeRendering:(0,d.SU)(b)})])),_:2},1032,["id","position","dimensions","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"])))),128)),(0,o._)("path",{class:"vue-flow__minimap-mask",d:(0,d.SU)(C),fill:e.maskColor,"fill-rule":"evenodd"},null,8,hu)],8,du))}});var pu=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const vu={name:"ControlButton"},gu={class:"vue-flow__controls-button"};function mu(e,t,n,i,a,r){return(0,o.wg)(),(0,o.iD)("button",gu,[(0,o.WI)(e.$slots,"default")])}var yu=pu(vu,[["render",mu]]);const wu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},bu=(0,o._)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),xu=[bu];function ku(e,t){return(0,o.wg)(),(0,o.iD)("svg",wu,xu)}var _u={render:ku};const Su={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Cu=(0,o._)("path",{d:"M0 0h32v4.2H0z"},null,-1),Nu=[Cu];function Mu(e,t){return(0,o.wg)(),(0,o.iD)("svg",Su,Nu)}var Tu={render:Mu};const Pu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Eu=(0,o._)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Vu=[Eu];function $u(e,t){return(0,o.wg)(),(0,o.iD)("svg",Pu,Vu)}var Bu={render:$u};const Iu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Hu=(0,o._)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),zu=[Hu];function Ou(e,t){return(0,o.wg)(),(0,o.iD)("svg",Iu,zu)}var Du={render:Ou};const Au={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Yu=(0,o._)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),ju=[Yu];function Ru(e,t){return(0,o.wg)(),(0,o.iD)("svg",Au,ju)}var Lu={render:Ru};const Xu={class:"vue-flow__controls"},Uu={name:"Controls"},qu=(x(b({},Uu),{props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=xl(),i=(0,d.Vh)(n,"nodesDraggable"),a=(0,d.Vh)(n,"nodesConnectable"),r=(0,d.Vh)(n,"elementsSelectable"),s=(0,d.Vh)(n,"setInteractive"),l=(0,d.Vh)(n,"zoomIn"),u=(0,d.Vh)(n,"zoomOut"),c=(0,d.Vh)(n,"fitView"),h=(0,o.Fl)((()=>i.value&&a.value&&r.value)),f=()=>{l.value(),t("zoomIn")},p=()=>{u.value(),t("zoomOut")},v=()=>{c.value(e.fitViewParams),t("fitView")},g=()=>{s.value(!h.value),t("interactionChange",!h.value)};return(t,n)=>((0,o.wg)(),(0,o.iD)("div",Xu,[(0,o.WI)(t.$slots,"top"),e.showZoom?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.WI)(t.$slots,"control-zoom-in",{},(()=>[(0,o.Wm)(yu,{class:"vue-flow__controls-zoomin",onClick:f},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"icon-zoom-in",{},(()=>[(0,o.Wm)((0,d.SU)(_u))]))])),_:3})])),(0,o.WI)(t.$slots,"control-zoom-out",{},(()=>[(0,o.Wm)(yu,{class:"vue-flow__controls-zoomout",onClick:p},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"icon-zoom-out",{},(()=>[(0,o.Wm)((0,d.SU)(Tu))]))])),_:3})]))],64)):(0,o.kq)("",!0),e.showFitView?(0,o.WI)(t.$slots,"control-fit-view",{key:1},(()=>[(0,o.Wm)(yu,{class:"vue-flow__controls-fitview",onClick:v},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"icon-fit-view",{},(()=>[(0,o.Wm)((0,d.SU)(Bu))]))])),_:3})])):(0,o.kq)("",!0),e.showInteractive?(0,o.WI)(t.$slots,"control-interactive",{key:2},(()=>[e.showInteractive?((0,o.wg)(),(0,o.j4)(yu,{key:0,class:"vue-flow__controls-interactive",onClick:g},{default:(0,o.w5)((()=>[(0,d.SU)(h)?(0,o.WI)(t.$slots,"icon-unlock",{key:0},(()=>[(0,o.Wm)((0,d.SU)(Lu))])):(0,o.kq)("",!0),(0,d.SU)(h)?(0,o.kq)("",!0):(0,o.WI)(t.$slots,"icon-lock",{key:1},(()=>[(0,o.Wm)((0,d.SU)(Du))]))])),_:3})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,o.WI)(t.$slots,"default")]))}}),["x","y","width","height"]),Fu=["stroke","stroke-width","d"],Wu=["cx","cy","r","fill"],Zu={key:2,height:"100",width:"100"},Gu=["fill"],Ku=["x","y","fill"],Ju={name:"Background"};x(b({},Ju),{props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={["dots"]:"#81818a",["lines"]:"#eee"},n=xl(),i=(0,d.Vh)(n,"viewport"),a=(0,o.Fl)((()=>{const t=e.gap&&e.gap*i.value.zoom,n=t&&i.value.x%t,o=t&&i.value.y%t,a=e.size*i.value.zoom;return{scaledGap:t,xOffset:n,yOffset:o,size:a}})),r=`pattern-${Math.floor(1e5*Math.random())}`,s=(0,o.Fl)((()=>e.patternColor||t[e.variant||"dots"])),l=(0,o.Fl)((()=>`M${a.value.scaledGap/2} 0 V${a.value.scaledGap} M0 ${a.value.scaledGap/2} H${a.value.scaledGap}`));return(t,n)=>((0,o.wg)(),(0,o.iD)("svg",{class:"vue-flow__background",style:(0,h.j5)({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[(0,o.WI)(t.$slots,"pattern-container",{id:r},(()=>[(0,o._)("pattern",{id:r,x:a.value.xOffset,y:a.value.yOffset,width:a.value.scaledGap,height:a.value.scaledGap,patternUnits:"userSpaceOnUse"},[(0,o.WI)(t.$slots,"pattern",{},(()=>["lines"===e.variant?((0,o.wg)(),(0,o.iD)("path",{key:0,stroke:(0,d.SU)(s),"stroke-width":e.size,d:(0,d.SU)(l)},null,8,Fu)):"dots"===e.variant?((0,o.wg)(),(0,o.iD)("circle",{key:1,cx:a.value.size,cy:a.value.size,r:a.value.size,fill:(0,d.SU)(s)},null,8,Wu)):(0,o.kq)("",!0),e.bgColor?((0,o.wg)(),(0,o.iD)("svg",Zu,[(0,o._)("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,Gu)])):(0,o.kq)("",!0)]))],8,qu)])),(0,o._)("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${r})`},null,8,Ku),(0,o.WI)(t.$slots,"default",{id:r})],4))}});const Qu=["stroke-width","d"],ec=["cx","cy","stroke-width"];function tc(e,t,n,i,a,r){return(0,o.wg)(),(0,o.iD)("g",null,[(0,o._)("path",{class:"animated",fill:"none",stroke:"#bbbbbb","stroke-width":2.5,d:`M${n.sourceX},${n.sourceY} C ${r.midX1} ${r.midY1} ${r.midX2} ${r.midY2} ${n.targetX},${n.targetY}`,"marker-end":"url(#arrowclosed)"},null,8,Qu),(0,o._)("circle",{cx:n.targetX,cy:n.targetY,fill:"#bbbbbb",r:1,stroke:"#bbbbbb","stroke-width":1.5},null,8,ec)])}var nc={name:"CustomEdge",props:{sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0}},computed:{midX1(){return 6*(this.sourceX+this.targetX)/10},midY1(){return 6*(this.sourceY+this.targetY)/10},midX2(){return 4*(this.sourceX+this.targetX)/10},midY2(){return 4*(this.sourceY+this.targetY)/10}}},oc=n(89);const ic=(0,oc.Z)(nc,[["render",tc]]);var ac=ic;const rc={class:"centered"},sc=["src"];function lc(e,t,n,i,a,r){const s=(0,o.up)("Handle");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("button",{class:(0,h.C_)(["customNode",r.core?"core":"",r.influence,r.separate?"separate":"","shrink-hover"]),onInput:t[0]||(t[0]=t=>e.click(n.data.content))},[(0,o._)("div",rc,[r.core?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"circle",src:r.icon},null,8,sc)):(0,o.kq)("",!0),(0,o._)("label",{class:(0,h.C_)([r.influence,r.separate?"separate":""])},(0,h.zw)(r.label),3)])],34),n.data.topThirds?((0,o.wg)(),(0,o.j4)(s,{key:0,id:"topLeft",type:"target",position:a.top,style:(0,h.j5)({left:a.topLeftOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),(0,o.Wm)(s,{id:"topCenter",type:"target",position:a.top},null,8,["position"]),n.data.topThirds?((0,o.wg)(),(0,o.j4)(s,{key:1,id:"topRight",type:"target",position:a.top,style:(0,h.j5)({left:"auto",right:a.topRightOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),n.data.bottomThirds?((0,o.wg)(),(0,o.j4)(s,{key:2,id:"bottomLeft",type:"source",position:a.bottom,style:(0,h.j5)({left:a.bottomLeftOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),(0,o.Wm)(s,{id:"bottomCenter",type:"source",position:a.bottom},null,8,["position"]),(0,o.Wm)(s,{id:"bottomCenter",type:"target",position:a.bottom},null,8,["position"]),n.data.bottomThirds?((0,o.wg)(),(0,o.j4)(s,{key:3,id:"bottomRight",type:"source",position:a.bottom,style:(0,h.j5)({left:"auto",right:a.bottomRightOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),n.data.leftThirds?((0,o.wg)(),(0,o.j4)(s,{key:4,id:"leftTop",type:"source",position:a.left,style:(0,h.j5)({top:a.leftTopOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),(0,o.Wm)(s,{id:"leftCenter",type:"source",position:a.left},null,8,["position"]),n.data.leftThirds?((0,o.wg)(),(0,o.j4)(s,{key:5,id:"leftBottom",type:"source",position:a.left,style:(0,h.j5)({top:"auto",bottom:a.leftBottomOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),n.data.rightThirds?((0,o.wg)(),(0,o.j4)(s,{key:6,id:"rightTop",type:"target",position:a.right,style:(0,h.j5)({top:a.rightTopOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0),(0,o.Wm)(s,{id:"rightCenter",type:"target",position:a.right},null,8,["position"]),n.data.rightThirds?((0,o.wg)(),(0,o.j4)(s,{key:7,id:"rightBottom",type:"target",position:a.right,style:(0,h.j5)({top:"auto",bottom:a.rightBottomOffset+"px"})},null,8,["position","style"])):(0,o.kq)("",!0)],64)}var uc=n(5947),cc=n(9219),dc=n(65),hc={name:"CustomNode",components:{Handle:Cr},props:{data:{type:Object,default:{topThirds:!1,bottomThirds:!1,leftThirds:!1,rightThirds:!1,draggable:!1,content:Object,txtId:""}}},data(){return{topLeftOffset:20,topRightOffset:15,bottomLeftOffset:20,bottomRightOffset:15,leftTopOffset:5,leftBottomOffset:10,rightTopOffset:5,rightBottomOffset:10,top:hr.Top,bottom:hr.Bottom,right:hr.Right,left:hr.Left}},computed:{...(0,dc.Se)({langId:"text/langId"}),label(){return this.getText(this.data.content.label,this.langId)},core(){return this.data.content.core},influence(){return this.data.content.influence},separate(){return this.data.content.separate},icon(){return this.data.content.icon?uc.Z.load("icons/"+this.data.content.icon):""}},methods:{getText(e){return cc.Z.get(e,this.langId)}}};const fc=(0,oc.Z)(hc,[["render",lc]]);var pc=fc;const vc=e=>((0,o.dD)("data-v-8640d8c2"),e=e(),(0,o.Cn)(),e),gc={class:"nodeTakeover"},mc={class:"main"},yc=["src"],wc={class:"text"},bc=["innerHTML"],xc=vc((()=>(0,o._)("br",null,null,-1))),kc={class:"side"},_c={key:0},Sc={class:"link shrink-hover"},Cc=["src"];function Nc(e,t,n,i,a,r){return(0,o.wg)(),(0,o.iD)("div",gc,[(0,o._)("section",mc,[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,o._)("img",{src:r.closeIcon},null,8,yc)]),(0,o._)("div",wc,[(0,o._)("h2",null,(0,h.zw)(r.getText(n.model.label)),1),(0,o._)("h4",null,(0,h.zw)(r.getText(n.model.subheader)),1),(0,o._)("p",{class:"lightLink",innerHTML:r.getDescription(n.model.description)},null,8,bc),xc]),(0,o._)("div",kc,[n.model.links.length>0?((0,o.wg)(),(0,o.iD)("h4",_c,"Explore data at this step. ")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.model.links,(e=>((0,o.wg)(),(0,o.iD)("section",Sc,[(0,o._)("img",{src:r.chartIcon},null,8,Cc),(0,o._)("p",null,(0,h.zw)(r.getText(e)),1)])))),256))])])])}var Mc={name:"NodeTakeover",props:{model:Object},computed:{...(0,dc.Se)({langId:"text/langId",glossaryModel:"text/glossaryModel"}),chartIcon(){return uc.Z.load("icons/line-chart.svg")},closeIcon(){return uc.Z.load("icons/x.svg")}},methods:{getText(e){return cc.Z.get(e,this.langId)},getDescription(e){var t=cc.Z.get(e,this.langId);return cc.Z.checkGlossary(t,this.glossaryModel,this.langId)}}};const Tc=(0,oc.Z)(Mc,[["render",Nc],["__scopeId","data-v-8640d8c2"]]);var Pc=Tc,Ec=JSON.parse('{"social":{"label":{"en":"Social Determinants","es":""},"core":true,"influence":"independent","separate":true,"icon":"people.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"What are the root causes of crime?","es":""},"description":{"en":"Research shows that underlying circumstances, including a lack of access to economic opportunity, a lack of individual support networks, and unaddressed trauma and a lack of access to mental health resources, to name a few factors, significantly impact the likelihood of someone\'s criminal involvement. Unfortunately the criminal justice system is not equipped to treat these underlying needs, and can in fact exascerbate them, leading to escalating cycles of recidivism and poverty.","es":""},"links":[{"en":"Sentencing Length vs Time","es":""},{"en":"Arrest Type vs Sentencing Type","es":""},{"en":"Arrest Type vs Time","es":""}]},"initial-arrest":{"label":{"en":"Initial Arrest","es":""},"icon":"","influence":"independent","separate":true,"iconDesc":{"en":"","es":""},"subheader":{"en":"What happens when someone is arrested without a warrant? ","es":""},"description":{"en":"When an officer has \\"probable cause\\" to believe a person has committed a crime, or that a person has witnessed a crime, then the officer can arrest that person without a warrant. That arrest triggers certain constitutional protections, including that the person arrested can only be held for 48 hours before appearing in court and either being released on bond, or held in jail until the next court date. For low level misdemeanor offenses or violations, the arresting officer can instead issue a ticket requiring the person arrested to appear on the arraignment date on their own recognizance, allowing their release in the meantime (instead of being held and transported to court by the police). Upon arrest, the officer files an incident report which includes: identifying information of the arrestee, the type of crime(s) allegedly committed, the date, time, and location of the arrest, and what happened during the incident. In Washtenaw County, the officer must also submit body camera footage of the arrest. If a victim is involved, the victim may submit their own statement in the report as well. The prosecutor is not involved in the arrest stage, but prosecutor\'s policy may influence officers in their decision whether to make an arrest. For example, if a prosecutor has made it known they will not prosecute certain charges, an officer may not make an arrest for those charges. Or if a prosecutor has rigorous probable cause standards, an officer may be less likely to make an arrest with weak probable cause. In Washtenaw County, the prosecutor has stopped pursuing charges from pretext stops, with a few exceptions, due to the lack of probable cause involved in these arrests. As a result, an officer may be less likely to make a pretext stop in the first place. ","es":""},"links":[{"en":"Habitual Offender Labeling vs Race","es":""},{"en":"Sentencing Length vs Time","es":""}]},"warrent-request":{"label":{"en":"Warrant Request","es":""},"influence":"independent","separate":true,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"","es":""},"description":{"en":"Most cases begin with a warrant request, where the police request permission from the Prosecutor to take a person into custody. Police can make arrests without warrants for crimes they witness. Prosectors can approve the warrant if they “reasonably believe that probable cause exists that the suspect committed the offense.” Usually prosecutors will want to approve warrants in situations where they believe they can prove the suspect to be guilty beyond a reasonable doubt.","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"referral":{"label":{"en":"Referral","es":""},"core":true,"influence":"sole","separate":false,"icon":"multi-arrow.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"The Prosecutor decides whether to pursue charges","es":""},"description":{"en":"The arresting officer refers the case (or warrant request), along with the incident report, body camera footage, and other relevant evidence, to the prosecutor\'s office. The officer also reccomends specific criminal charges for the suspect. However, it is the prosecutor who decides what charges to bring, or, indeed, whether to bring charges at all. This is the stage where the prosecutor decides whether to dismiss, divert, or prosecute the charges. If they decide to prosecute the charges, then the case is arraigned. If it is a misdemeanor, the person charged enters a plea (not guilty, guilty, or no contest (treated the same as guilty) at the arraignment date. If the charge is a felony charge, the person facing charges does not enter a plea at the arraignment date. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Sentencing Length vs Time","es":""}]},"assignment":{"label":{"en":"Attorney and Court Assignment","es":""},"core":true,"influence":"independent","separate":false,"icon":"analyze.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"Beginning the court process","es":""},"description":{"en":"If the prosecutor decides to pursue the case, the defendant is assigned to a court and judge. Most criminal cases either go to district court or circuit court. Judges in each court are elected to six year terms. The Sixth Amendment guarantees all defendants the right to a lawyer. Many defendants choose to hire their own lawyer, who might specialize in the defendants particular type of case. If the defendant cannot afford to hire their own lawyer, a public defender will represent them. ","es":""},"links":[{"en":"Sentencing Length vs Time","es":""},{"en":"Time vs Charge Type","es":""}]},"rejection":{"label":{"en":"Rejection","es":""},"influence":"sole","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Not enough evidence","es":""},"description":{"en":"The prosecutor may choose to reject the case if there is insufficient evidence to support charges. The charges are dismissed and the arrestee goes free without a criminal record. Standards of evidence vary depending on the incident and the crime. As of 2021, the Washtenaw County Prosecutor recquires all referred cases to include body camera footage of the arrest. Lack of footage will result in an automatic rejection. Although a dismissal means no criminal charges will be brought for the case, an arrest record can still have collateral consequences. Although in Michigan, 60 days after the rejection of a case, the arrest record is expunged, background checks may pick up the arrest in the interim, with consequences for immigration, employment, and housing.","es":""},"links":[]},"warrent-arrest":{"label":{"en":"Warrant Arrest","es":""},"influence":"mixed","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Conducting a warrant arrest","es":""},"description":{"en":"If prosecutor decides to approve a warrant request and judge signs it, the requesting officer now has authority to arrest the identified suspect or search their homes for evidence of illegal activity. They are able to confiscate any incriminating evidence they find. However, the fourth amendment protects people from \\"unreasonable searches and seizures\\" and sets standards for police conduct during and arrest. For example, officers often must follow a \\"knock and announce\\" rule to make their presence known and give the suspect reasonable time to answer the door. If the court deems the officer\'s conduct \\"unreasonable\\", it may choose to exclude evidence collected during the arrest. However, these rules become waived if there is a threat of bodily harm or escape, giving officers broad latitude. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Habitual Offender Labeling vs Race","es":""},{"en":"Time vs Charge Type","es":""}]},"diversion":{"label":{"en":"Diversion","es":""},"influence":"sole","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"An alternative to the traditional process","es":""},"description":{"en":"Diversion is an alternative to the traditional justice process, designed to remedy criminal behavior while keeping the offender out of the formal criminal justice system. They are most often pursued for offenders who are first-time, non-violent, or otherwise considered at low risk to reoffend. Diversion tactics vary based on the specifics of each case, but can involve community service, group and individual counseling sessions, restorative justice, and specialized rehabilitative courts like youth or drug court. If a victim is involved, the offender may also be required to make direct restitutions for damages. The particular requirements for referral to diversion programs, including where they occur in the process (pre-arraignment, pre-plea, or post-plea), varies by jurisdiction and case type. ","es":""},"links":[{"en":"Sentencing Length vs Time","es":""}]},"arraignment":{"label":{"en":"Arraignment","es":""},"core":true,"influence":"mixed","separate":false,"icon":"law-book.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"The first court appearance","es":""},"description":{"en":"In the arraignment stage, the arrestee, now known as the \\"defendant\\", makes their initial court appearance before the judge and prosecutor. The judge informs the defendant of the criminal charges filed against him or her, and the defendant must enter a plea of \\"guilty\\" or \\"not guilty\\". If the defendant pleads \\"guilty\\", sentencing begins immediately. If the defendant pleads \\"not guilty\\", the case will move into the trial stage, where they have an opportunity to defend their innocence. Criminal cases differ from civil cases-- civil cases are typically disputes between two private parties, as in a lawsuit. Criminal cases are led by the government (known as \\"the people\\"). The prosecutor is only involved with criminal cases. At this stage, the prosecutor may offer the defendant a \\"plea bargain\\", in which the defendant pleads \\"guilty\\" in exchange for a lighter sentence. The judge may also choose to move the case into a \\"problem-solving\\" court designed to remedy the case outside the traditional criminal justice system. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"speciality":{"label":{"en":"Specialty Courts","es":""},"influence":"mixed","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Problem-solving Courts","es":""},"description":{"en":"Specialty courts, also known as \\"problem-solving\\" courts, are a form of diversion in which the judge and prosecutor refer the case to a non-adversarial system where all parties work together to solve the problem at hand. If the offender violates the conditions imposed by the court, the case may return to the criminal court track. The specific nature of specialty courts vary between counties. Washtenaw County offers three types of specialty court: veteran treatment court: for veterans with mental health or substance abuse issues. Clients move through an 18-24 month program in which they are closely monitored. The court gives them a treatment plan, along with access to resources and a supportive community. Mental health court: for offenders whose crimes are the result of a mental illness. A social work team provides the client therapeutic treatment while connecting them with education, housing, and employment resources. Sobriety court: for repeat offender DUIs and other crimes stemming from drug or alcohol addiction. The client is enrolled in a treatment program and closely monitored for sobriety. ","es":""},"links":[{"en":"Arrest Type vs Sentencing Type","es":""},{"en":"Race vs Sentencing Type","es":""},{"en":"Habitual Offender Labeling vs Race","es":""}]},"plea":{"label":{"en":"Plea Offer","es":""},"influence":"sole","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"How the vast majority of cases end","es":""},"description":{"en":"In a plea bargain, the Prosecutor offers to reduce the defendant\'s criminal charges and seek a lesser sentence in exchange for a guilty plea before the trial. A plea bargain can help a defendant avoid severe sentencing, high court costs, and a lengthy trial. However plea bargaining also carries serious consequences. Because it requires an admission of guilt, it precludes a defendant from maintaining their innocence. Plea bargaining still results in a criminal record and sentence, and the corresponding loss of rights and priviledges. Many low-income people without adequate legal representation accept plea offers even when they are innocent or there is insufficient evidence because they fear they would be found guilty on the more severe set of charges in an unpredictable trial setting, or because they cannot afford to spend time in a lengthy trial. Some prosecutors may exploit this fear by deliberately over-charging a defendant and offering a plea bargain, thereby increasing their conviction rate. ","es":""},"links":[]},"trial":{"label":{"en":"Trial","es":""},"core":true,"influence":"mixed","separate":false,"icon":"gavel.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"Only 5% of all cases go to trial ","es":""},"description":{"en":"The American court system is predicated on the notion that the accused is innocent until proven guilty. Here, the defendant has an opportunity to show their innocence through a formal examination of evidence and witnesses. The Prosecutor is tasked with proving the defendant\'s guilt beyond a reasonable doubt. Not all trials have juries -- only cases with \\"serious\\" offenses carrying more than six month\'s prison time typically feature a jury. In lower-level cases, the judge makes the final determination of guilt. The length of the trial depends on the severity and complexity of the case. A low level misdemeanor trial typically lasts between one day and two weeks, while a felony trial with a jury could last up to a year. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"aquittal-dismissal":{"label":{"en":"Aquittal or Dismissal","es":""},"influence":"mixed","separate":false,"icon":"agreement.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"","es":""},"description":{"en":"If the judge or jury still have reasonable doubt at the end of the trial, the defendant is acquitted and cleared of criminal charges, although they may still be held liable in civil disputes with the victim or other aggrieved parties. The court may also dismiss the case, which terminates the trial wwithout any determination of guilt or conviction. Cases may also dismiss the case, which terminates the trial without any determination of guilt or conviction. Cases may be dismissed for a number of reasons, including if the Prosecutor fails to move the case forward, due process is violated, or lack of jurisdiction. Dismissal is not the same as a \\"not guilty\\" verdict, and the case may still remain on the defendant\'s criminal record. ","es":""},"links":[{"en":"Habitual Offender Labeling vs Race","es":""},{"en":"Time vs Charge Type","es":""}]},"conviction":{"label":{"en":"Conviction","es":""},"core":true,"influence":"mixed","separate":false,"icon":"gavel.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"A Guilty Verdict","es":""},"description":{"en":"If the Prosecutor is able to eliminate all reasonable doubt over the defendant\'s guilt, the defendant is convicted and the judge sentences them to punishment. The sentence can carry multiple elements, such as the payment of fines and community service. The judge follows a set of federal guidelines determining the maximum and minimum sentencing requirements for each crime. However, there have been recent efforts to eliminate \\"mandatory minimum\\" sentencing requirements, which prevent the judge from exercising discretion to give out lenient sentences. While the ultimate decision to convict falls to the judge or jury, Prosecutors are often judged by their conviction rate-- many have a political incentive to convict as many defendants as possible, especially in cases of violent crime. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Habitual Offender Labeling vs Race","es":""}]},"fines":{"label":{"en":"Fines","es":""},"influence":"limited","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Paying for Crime","es":""},"description":{"en":"If the Court decides the defendant has adequate finances, a court may order a convicted defendant to pay a fine. Dollar amounts are set by statute and generally increase for more severe crimes. Fines may be combined with community service, incarceration, probation, or other forms of sentencing. They are most common in traffic violations and low level misdemeanors. If the defendant fails to pay the fine within a certain time period, they may incur more serious consequences. Courts usually seek alternatives to fines for indigent defendants who are unable to pay. The defendant may also be liable for other court costs, such as those for victim assessments, DNA testing, and probation fees. ","es":""},"links":[{"en":"Arrest Type vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"community-service":{"label":{"en":"Community Service","es":""},"influence":"limited","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Repaying the Community","es":""},"description":{"en":"Many misdemeanor sentences involve some form of community service, in which the court orders the dependant to volunteer with a local oganization for a specified number of hours. Community service might be combined with other sentencing options, such as fines, incarceration, or probation. If the defendant fails to adequately complete the community service, they may incure more severe consequences. Common court order destinations in Washtenaw County include non-profits like the United Way, Salvation Army, and Meals on Wheels. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Arrest Type vs Time","es":""}]},"probation":{"label":{"en":"Probation or Suspended Sentence","es":""},"influence":"limited","separate":false,"icon":"","iconDesc":{"en":"","es":""},"subheader":{"en":"Conditional Release","es":""},"description":{"en":"Like parole, probation is a form of conditional release. However, it is typically offered earlier in the sentence as a response to good behavior. The inmate is subject to strict monitoring throughout the probationary period, and may be re-incarcerated if they violate the terms of probation. In Washtenaw County, those on probation may be required to pay supervision fees on top of other legal costs.  A suspended sentence allows for a probationary period before the defendant ever goes to jail. If the terms of the probation are violated, the sentence takes effect and the individual is incarcerated. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"incarceration":{"label":{"en":"Incarceration","es":""},"core":true,"influence":"limited","separate":true,"icon":"law-book.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"The Prison System ","es":""},"description":{"en":"Many convictions carry prison sentences, which can range from a few days for a small misdemeanor to a lifetime for a serious felony. America\'s incarceration system is fragmented. Jails are operated on the county level and are reserved for pretrial detainees and minor offenders, while those convicted of more serious charges tend to go to state or federal prison. Although exact measures vary, most experts agree that the United States has the world\'s highest incarceration rate, especially for Black men. The Sherriff\'s Community Correction\'s office manages the Washtenaw County Jail. There are 30 active state prisons currently located throughout Michigan. The state has closed or consolidated nine additional prisons over the past decade. ","es":""},"links":[]},"parole":{"label":{"en":"Parole","es":""},"icon":"","influence":"limited","separate":true,"iconDesc":{"en":"","es":""},"subheader":{"en":"Early Release ","es":""},"description":{"en":"Depending on the location of their imprisonment, an inmate can appeal to a state or local parole board to serve out the rest of their sentence through community service and other active projects. The parolee is still subject to close monitoring and must follow a certain set of conditions for one to four years. ","es":""},"links":[{"en":"Arrest Type vs Sentencing Type","es":""}]},"release":{"label":{"en":"Release","es":""},"core":"true","influence":"limited","separate":true,"icon":"agreement.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"Re-entering Society","es":""},"description":{"en":"When inmates finish serving their sentence, they are re-released back into the \\"real world\\". However, the effects of incarceration and a criminal record can have long lasting repercussions. Without adequate support from friends or family, former inmates have greater difficulty finding housing, employment, education and other resources essential to stability and long-term prosperity. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Time vs Charge Type","es":""}]},"rehab":{"label":{"en":"Rehabilitation","es":""},"core":true,"influence":"independent","separate":true,"icon":"people.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"Staying out of the courts ","es":""},"description":{"en":"Rehabilitation helps keep people from re-offending after they serve their sentences. This typically includes access to important resources such as skills training, housing, and mental health support, as well as emotional support from friends, family and members of the community. There are several non-profits in Washtenaw County providing re-entry services for returning inmates. For a list of Michigan-based reentry resources, please visit Michigan 211 website at https://www.navigateresources.net/call/. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Arrest Type vs Sentencing Type","es":""}]},"recidivism":{"label":{"en":"Recidivism","es":""},"core":true,"influence":"independent","separate":true,"icon":"stamped-paper.svg","iconDesc":{"en":"","es":""},"subheader":{"en":"Why do people re-offend? ","es":""},"description":{"en":"Individuals who complete their sentences are at risk of recidivism, or a relapse into criminal behavior. Social determinants play a large role in recidivism-- the risk is especially high for people who re-enter society without having their crucial housing, employment and social needs met. Having a criminal record can prevent someone from signing an apartment lease, securing a bank loan, or getting a well-paying job, significantly diminishing their long-term financial prospects and quality of life. For these people, it may be easy to slip back into criminal activity, especially without adequate support from friends, family, and the community. ","es":""},"links":[{"en":"Race vs Sentencing Type","es":""},{"en":"Arrest Type vs Sentencing Type","es":""},{"en":"Habitual Offender Labeling vs Race","es":""}]}}');const{getNode:Vc}=xl();var $c={name:"Flowchart",components:{VueFlow:uu,CustomNode:pc,CustomEdge:ac,NodeTakeover:Pc},data(){return{showTakeover:!1,currentNode:null,nodeTypes:{customNode:pc,connectionMode:pr.Loose},elements:[{id:"1",position:{x:550,y:0},data:{txtId:"social",bottomThirds:!0}},{id:"2",position:{x:400,y:150},data:{txtId:"initial-arrest"}},{id:"3",position:{x:700,y:150},data:{txtId:"warrent-request"}},{id:"4",position:{x:550,y:400},data:{txtId:"referral",topThirds:!0}},{id:"5",position:{x:550,y:550},data:{txtId:"assignment",bottomThirds:!0}},{id:"6",position:{x:350,y:400},data:{txtId:"rejection"}},{id:"7",position:{x:400,y:800},data:{txtId:"warrent-arrest"}},{id:"8",position:{x:700,y:750},data:{txtId:"diversion"}},{id:"9",position:{x:550,y:1050},data:{txtId:"arraignment",topThirds:!0,bottomThirds:!0}},{id:"10",position:{x:700,y:900},data:{txtId:"speciality"}},{id:"11",position:{x:700,y:1200},data:{txtId:"plea"}},{id:"12",position:{x:400,y:1200},data:{txtId:"trial"}},{id:"13",position:{x:100,y:1200},data:{txtId:"aquittal-dismissal"}},{id:"14",position:{x:550,y:1450},data:{txtId:"conviction",topThirds:!0,leftThirds:!0}},{id:"15",position:{x:300,y:1375},data:{txtId:"fines"}},{id:"16",position:{x:180,y:1450},data:{txtId:"community-service"}},{id:"17",position:{x:50,y:1525},data:{txtId:"probation"}},{id:"18",position:{x:550,y:1750},data:{txtId:"incarceration"}},{id:"19",position:{x:550,y:1900},data:{txtId:"parole"}},{id:"20",position:{x:550,y:2050},data:{txtId:"release",topThirds:!0,bottomThirds:!0}},{id:"21",position:{x:400,y:2200},data:{txtId:"rehab"}},{id:"22",position:{x:700,y:2200},data:{txtId:"recidivism"}},{id:"e1-3",source:"1",target:"2",sourceHandle:"bottomLeft",targetHandle:"topCenter"},{id:"e1-2",source:"1",target:"3",sourceHandle:"bottomRight",targetHandle:"topCenter"},{id:"e2-4",source:"2",target:"4",sourceHandle:"bottomCenter",targetHandle:"topLeft"},{id:"e3-4",source:"3",target:"4",sourceHandle:"bottomCenter",targetHandle:"topRight"},{id:"e4-5",source:"4",target:"5",sourceHandle:"bottomCenter",targetHandle:"topCenter"},{id:"e4-6",source:"4",target:"6",sourceHandle:"leftCenter",targetHandle:"rightCenter"},{id:"e5-7",source:"5",target:"7",sourceHandle:"bottomLeft",targetHandle:"topCenter"},{id:"e5-8",source:"5",target:"8",sourceHandle:"bottomRight",targetHandle:"topCenter"},{id:"e5-9",source:"5",target:"9",sourceHandle:"bottomCenter",targetHandle:"topCenter"},{id:"e7-9",source:"7",target:"9",sourceHandle:"bottomCenter",targetHandle:"topLeft"},{id:"e8-10",source:"8",target:"10",sourceHandle:"bottomCenter",targetHandle:"topCenter"},{id:"e9-10",source:"10",target:"9",sourceHandle:"bottomCenter",targetHandle:"topRight"},{id:"e9-11",source:"9",target:"11",sourceHandle:"bottomRight",targetHandle:"topCenter"},{id:"e9-12",source:"9",target:"12",sourceHandle:"bottomLeft",targetHandle:"topCenter"},{id:"e12-13",source:"12",target:"13",sourceHandle:"leftCenter",targetHandle:"rightCenter"},{id:"e11-14",source:"11",target:"14",sourceHandle:"bottomCenter",targetHandle:"topRight"},{id:"e12-14",source:"12",target:"14",sourceHandle:"bottomCenter",targetHandle:"topLeft"},{id:"e14-15",source:"14",target:"15",sourceHandle:"leftTop",targetHandle:"rightCenter"},{id:"e14-16",source:"14",target:"16",sourceHandle:"leftCenter",targetHandle:"rightCenter"},{id:"e14-17",source:"14",target:"17",sourceHandle:"leftBottom",targetHandle:"rightCenter"},{id:"e14-18",source:"14",target:"18",sourceHandle:"bottomCenter",targetHandle:"topCenter"},{id:"e18-19",source:"18",target:"19",sourceHandle:"bottomLeft",targetHandle:"topCenter"},{id:"e19-20",source:"19",target:"20",sourceHandle:"bottomCenter",targetHandle:"topLeft"},{id:"e18-20",source:"18",target:"20",sourceHandle:"bottomRight",targetHandle:"topRight"},{id:"e20-21",source:"20",target:"21",sourceHandle:"bottomLeft",targetHandle:"topCenter"},{id:"e20-22",source:"20",target:"22",sourceHandle:"bottomRight",targetHandle:"topCenter"}]}},methods:{openTakeover(e){this.currentNode=e,this.showTakeover=!0},closeTakeover(){this.showTakeover=!1}},mounted(){for(var e in this.elements){var t=this.elements[e];if(null!=t.position){var n=t.data.txtId;t.type="customNode",t.draggable=!1,Ec[n]||console.log("could not find: "+n),t.data.content=Ec[n],t.data.txtId=n,t.events={click:e=>{this.openTakeover(e.node.data.content)}}}else t.markerEnd=vr.ArrowClosed}}};const Bc=(0,oc.Z)($c,[["render",u]]);var Ic=Bc,Hc={name:"Context",components:{Flowchart:Ic}};const zc=(0,oc.Z)(Hc,[["render",a],["__scopeId","data-v-4c6d43b3"]]);var Oc=zc}}]);
//# sourceMappingURL=621.7b97e70b.js.map